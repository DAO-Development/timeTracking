(function(t){function e(e){for(var a,s,r=e[0],l=e[1],c=e[2],d=0,f=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&f.push(n[s][0]),n[s]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(f.length)f.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var t,e=0;e<o.length;e++){for(var i=o[e],a=!0,r=1;r<i.length;r++){var l=i[r];0!==n[l]&&(a=!1)}a&&(o.splice(e--,1),t=s(s.s=i[0]))}return t}var a={},n={app:0},o=[];function s(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=a,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)s.d(i,a,function(e){return t[e]}.bind(null,a));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/static/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var u=l;o.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("56d7")},"034f":function(t,e,i){"use strict";i("85ec")},"0b79":function(t,e,i){t.exports=i.p+"img/A3DPhhAL6Zg.png"},1577:function(t,e,i){t.exports=i.p+"img/user1.png"},"199c":function(t,e,i){"use strict";(function(t){var a=i("1157"),n=i.n(a),o=i("2b0e"),s=i("fb62");t.jQuery=t.$=n.a,t.appUrl="https://shielded-plateau-96200.herokuapp.com/",o["a"].prototype.$hostname="https://shielded-plateau-96200.herokuapp.com/",e["a"]={name:"App",components:{Menu:s["a"]},created:function(){(localStorage.getItem("auth_token")||sessionStorage.getItem("auth_token"))&&(this.auth=!0)},data:function(){return{auth:!1}},methods:{setAuth:function(){this.auth=!0}}}}).call(this,i("c8ba"))},5469:function(t,e,i){var a={"./media/objects/A3DPhhAL6Zg.png":"0b79","./media/users/user1.png":"1577"};function n(t){var e=o(t);return i(e)}function o(t){if(!i.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}n.keys=function(){return Object.keys(a)},n.resolve=o,t.exports=n,n.id="5469"},"56d7":function(t,e,i){"use strict";i.r(e);i("e260"),i("e6cf"),i("cca6"),i("a79d");var a=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-app",[i("v-container",[i("div",{staticClass:"flex-main"},[t.auth?i("Menu",{staticClass:"flex-sidebar"}):t._e(),i("router-view",{on:{"set-auth":t.setAuth}})],1)])],1)},o=[],s=i("199c"),r=s["a"],l=(i("034f"),i("2877")),c=i("6544"),u=i.n(c),d=i("7496"),f=i("a523"),m=Object(l["a"])(r,n,o,!1,null,null,null),h=m.exports;u()(m,{VApp:d["a"],VContainer:f["a"]});var v=i("8c4f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"profile flex-content"},[a("div",{staticClass:"summary-box"},[a("div",{staticClass:"profile__image"},[null!=t.user.photo_path?a("v-img",{attrs:{"lazy-src":i("5469")("./media"+t.user.photo_path),src:i("5469")("./media"+t.user.photo_path)}}):t._e(),a("div",{staticClass:"profile__change-photo"},[t._v("Сменить фото")])],1),a("div",{staticClass:"profile__info"},[a("h3",[t._v("Личная информация")]),a("ul",[a("li",[a("span",{staticClass:"profile__info-title"},[t._v("Имя")]),a("span",{staticClass:"profile__info-content"},[t._v(t._s(t.user.name))])]),a("li",[a("span",{staticClass:"profile__info-title"},[t._v("Фамилия")]),a("span",{staticClass:"profile__info-content"},[t._v(t._s(t.user.lastname))])]),a("li",[a("span",{staticClass:"profile__info-title"},[t._v("Должность")]),a("span",{staticClass:"profile__info-content"},[t._v(t._s(t.user.position))])])]),a("h3",[t._v("Контакты")]),a("ul",[a("li",[a("span",{staticClass:"profile__info-title"},[t._v("Телефон")]),a("span",{staticClass:"profile__info-content"},[t._v(t._s(t.user.phone))])]),a("li",[a("span",{staticClass:"profile__info-title"},[t._v("E-mail")]),a("span",{staticClass:"profile__info-content"},[t._v(t._s(t.user.auth_user_id.email))])])])])]),a("v-alert",{attrs:{"close-text":"Закрыть",color:"error",dismissible:""},model:{value:t.alertError,callback:function(e){t.alertError=e},expression:"alertError"}},[t._v(" "+t._s(t.alertMsg)+" ")])],1)},_=[],g=i("1157"),b=i.n(g),C={name:"Home",data:function(){return{page:"home",user:{},groups:[],alertError:!1,alertMsg:""}},created:function(){localStorage.getItem("auth_token")?(this.$emit("set-auth"),b.a.ajaxSetup({headers:{Authorization:"Token "+localStorage.getItem("auth_token")}}),this.loadData()):sessionStorage.getItem("auth_token")?(this.$emit("set-auth"),b.a.ajaxSetup({headers:{Authorization:"Token "+sessionStorage.getItem("auth_token")}}),this.loadData()):this.$router.push({name:"Login"})},methods:{loadData:function(){var t=this;b.a.ajax({url:this.$hostname+"time-tracking/user",type:"GET",success:function(e){t.user=e.data.data,console.log(e.data.data)},error:function(e){console.log(e),500===e.status?t.alertMsg="Ошибка соединения с сервером":t.alertMsg="Непредвиденная ошибка",t.alertError=!0}})}}},w=C,x=i("0798"),k=i("adda"),j=Object(l["a"])(w,p,_,!1,null,null,null),V=j.exports;u()(j,{VAlert:x["a"],VImg:k["a"]});var O=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login"},[i("div",{staticClass:"logo"},[t._v("logo")]),i("v-form",{ref:"form",staticClass:"mu-demo-form",attrs:{model:t.authForm}},[i("h1",[t._v("Авторизация")]),i("v-text-field",{attrs:{placeholder:"Логин",rules:t.usernameRules,required:"","append-icon":"$login",outlined:""},model:{value:t.authForm.login,callback:function(e){t.$set(t.authForm,"login",e)},expression:"authForm.login"}}),i("v-text-field",{attrs:{placeholder:"Пароль",type:"password",rules:t.passwordRules,required:"","append-icon":"$password",outlined:""},model:{value:t.authForm.password,callback:function(e){t.$set(t.authForm,"password",e)},expression:"authForm.password"}}),i("v-checkbox",{attrs:{label:"Запомнить меня"},model:{value:t.checkbox,callback:function(e){t.checkbox=e},expression:"checkbox"}}),i("v-btn",{attrs:{color:"primary"},on:{click:t.setLogin}},[t._v("Войти")])],1),i("button",{staticClass:"login__recover-btn",on:{click:t.goRecover}},[t._v("Забыли пароль?")]),i("v-alert",{attrs:{"close-text":"Закрыть",color:"error",dismissible:""},model:{value:t.alertError,callback:function(e){t.alertError=e},expression:"alertError"}},[t._v(" "+t._s(t.alertMsg)+" ")]),i("v-alert",{attrs:{"close-text":"Закрыть",color:"success",dismissible:""},model:{value:t.alertSuccess,callback:function(e){t.alertSuccess=e},expression:"alertSuccess"}},[t._v(" "+t._s(t.alertMsg)+" ")])],1)},P=[],y={name:"Login",data:function(){return{authForm:{login:"",password:""},checkbox:!1,usernameRules:[function(t){return!!t||"Необходимо заполнить имя пользователя"}],passwordRules:[function(t){return!!t||"Необходимо заполнить пароль"}],alertError:!1,alertSuccess:!1,alertMsg:""}},created:function(){(localStorage.getItem("auth_token")||sessionStorage.getItem("auth_token"))&&this.$router.push({name:"Home"})},methods:{setLogin:function(){var t=this;this.$refs.form.validate()&&b.a.ajax({url:this.$hostname+"auth/token/login",type:"POST",data:{email:this.authForm.login,password:this.authForm.password},success:function(e){t.checkbox?localStorage.setItem("auth_token",e.data.attributes.auth_token):sessionStorage.setItem("auth_token",e.data.attributes.auth_token),t.$router.push({name:"Home"})},error:function(e){switch(console.log(e),t.alertError=!0,t.alertMsg="Непредвиденная ошибка",e.status){case 400:t.alertMsg="Пользователя с такой почтой не существует";break;case 403:t.alertMsg="Неверный пароль";break;case 404:t.alertMsg="Страница не найдена";break}}})},goRecover:function(){this.$router.push({name:"RecoverPassword"})}}},$=y,D=i("8336"),I=i("ac7c"),L=i("4bd4"),M=i("8654"),F=Object(l["a"])($,O,P,!1,null,"6f0a693c",null),E=F.exports;u()(F,{VAlert:x["a"],VBtn:D["a"],VCheckbox:I["a"],VForm:L["a"],VTextField:M["a"]});var T=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"login"},[i("div",{staticClass:"logo"},[t._v("logo")]),i("v-form",{ref:"form",staticClass:"mu-demo-form",attrs:{model:t.authForm}},[i("h1",[t._v("Восстановление пароля")]),i("v-text-field",{attrs:{placeholder:"Логин",rules:t.usernameRules,required:"","append-icon":"$login",outlined:""},model:{value:t.authForm.login,callback:function(e){t.$set(t.authForm,"login",e)},expression:"authForm.login"}}),i("v-btn",{attrs:{color:"primary"},on:{click:t.sendMessage}},[t._v("Восстановить пароль")])],1),i("v-alert",{attrs:{"close-text":"Закрыть",color:"error",dismissible:""},model:{value:t.alertError,callback:function(e){t.alertError=e},expression:"alertError"}},[t._v(" "+t._s(t.alertMsg)+" ")]),i("v-alert",{attrs:{"close-text":"Закрыть",color:"success",dismissible:""},model:{value:t.alertSuccess,callback:function(e){t.alertSuccess=e},expression:"alertSuccess"}},[t._v(" "+t._s(t.alertMsg)+" ")])],1)},S=[],A={name:"RecoverPassword",data:function(){return{authForm:{login:""},usernameRules:[function(t){return!!t||"Необходимо заполнить имя пользователя"}],alertError:!1,alertSuccess:!1,alertMsg:""}}},N=A,H=Object(l["a"])(N,T,S,!1,null,"9a2018f2",null),B=H.exports;u()(H,{VAlert:x["a"],VBtn:D["a"],VForm:L["a"],VTextField:M["a"]});var Z=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"news flex-content"},[i("div",{staticClass:"summary-box"},[i("div",{staticClass:"summary-box__title"},[i("h3",[t._v("Новости")]),t.all?t._e():i("div",{staticClass:"addition-btn",on:{click:function(e){t.all=!0}}},[i("span",[t._v("К списку новостей")]),i("back-icon")],1)]),t.all?i("div",{staticClass:"news-all"},[i("div",{staticClass:"news-all__grid"},[t._l(t.news,(function(e){return[i("v-card",{key:e.id,staticClass:"news-single",attrs:{color:"primary"},on:{click:function(i){return t.openNew(e)}}},[i("div",{staticClass:"news-single__actions"},[i("v-icon",{on:{click:function(i){return t.deleteNew(e.id)}}},[t._v("$waste")]),i("v-icon",{on:{click:function(i){return t.openEditForm(e.id,e.title,e.text)}}},[t._v("$edit")])],1),i("div",{staticClass:"news-single__title"},[t._v(t._s(e.title))]),i("div",{staticClass:"news-single__text",domProps:{innerHTML:t._s(e.text)}})])]}))],2),i("v-list",[i("v-list-item",{staticClass:"content-list__btns-add",on:{click:t.openAddForm}},[i("v-list-item-icon",[i("v-icon",[t._v("mdi-plus")])],1),i("v-list-item-content",[i("v-list-item-title",[t._v("Добавить новость")])],1)],1)],1)],1):i("div",{staticClass:"news-open"},[i("h4",[t._v(t._s(t.currentNew.title))]),i("div",{staticClass:"news-open__text",domProps:{innerHTML:t._s(t.currentNew.text)}}),i("div",{staticClass:"news-open__actions open__actions"},[i("div",{staticClass:"addition-btn",on:{click:function(e){return t.openEditForm(t.currentNew.id,t.currentNew.title,t.currentNew.text)}}},[i("edit-icon"),t._v(" Редактировать новость ")],1),i("div",{staticClass:"addition-btn",on:{click:function(e){return t.deleteNew(t.currentNew.id)}}},[i("waste-icon"),t._v(" Удалить новость ")],1)])])]),i("v-dialog",{staticClass:"news__dialog",attrs:{persistent:""},model:{value:t.addForm,callback:function(e){t.addForm=e},expression:"addForm"}},[i("v-card",[i("v-toolbar",{attrs:{flat:""}},[i("v-spacer"),i("v-btn",{attrs:{icon:""},on:{click:t.closeForm}},[i("v-icon",[t._v("mdi-close")])],1)],1),i("h3",[t._v(t._s(t.formTitle))]),i("v-card-text",[i("v-text-field",{attrs:{placeholder:"Заголовок",rules:t.titleRules,required:"",outlined:""},model:{value:t.newNew.title,callback:function(e){t.$set(t.newNew,"title",e)},expression:"newNew.title"}}),i("v-editor",{attrs:{config:t.editorConfig},model:{value:t.newNew.text,callback:function(e){t.$set(t.newNew,"text",e)},expression:"newNew.text"}})],1),i("v-card-actions",[i("v-spacer"),i("v-btn",{staticClass:"action-btn",attrs:{color:"primary"},on:{click:t.addNew}},[t._v(t._s(t.formBtnText))])],1)],1)],1)],1)},R=[],q=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M8 5.6C8 5.17565 8.16857 4.76869 8.46863 4.46863C8.76869 4.16857 9.17565 4 9.6 4H14.4C14.8243 4 15.2313 4.16857 15.5314 4.46863C15.8314 4.76869 16 5.17565 16 5.6V7.2H19.2C19.4122 7.2 19.6157 7.28429 19.7657 7.43431C19.9157 7.58434 20 7.78783 20 8C20 8.21217 19.9157 8.41566 19.7657 8.56569C19.6157 8.71571 19.4122 8.8 19.2 8.8H18.3448L17.6512 18.5136C17.6225 18.9173 17.4418 19.2951 17.1457 19.5709C16.8495 19.8467 16.4599 20 16.0552 20H7.944C7.53931 20 7.14965 19.8467 6.85351 19.5709C6.55736 19.2951 6.37673 18.9173 6.348 18.5136L5.656 8.8H4.8C4.58783 8.8 4.38434 8.71571 4.23431 8.56569C4.08429 8.41566 4 8.21217 4 8C4 7.78783 4.08429 7.58434 4.23431 7.43431C4.38434 7.28429 4.58783 7.2 4.8 7.2H8V5.6ZM9.6 7.2H14.4V5.6H9.6V7.2ZM7.2592 8.8L7.9448 18.4H16.056L16.7416 8.8H7.2592ZM10.4 10.4C10.6122 10.4 10.8157 10.4843 10.9657 10.6343C11.1157 10.7843 11.2 10.9878 11.2 11.2V16C11.2 16.2122 11.1157 16.4157 10.9657 16.5657C10.8157 16.7157 10.6122 16.8 10.4 16.8C10.1878 16.8 9.98434 16.7157 9.83431 16.5657C9.68429 16.4157 9.6 16.2122 9.6 16V11.2C9.6 10.9878 9.68429 10.7843 9.83431 10.6343C9.98434 10.4843 10.1878 10.4 10.4 10.4ZM13.6 10.4C13.8122 10.4 14.0157 10.4843 14.1657 10.6343C14.3157 10.7843 14.4 10.9878 14.4 11.2V16C14.4 16.2122 14.3157 16.4157 14.1657 16.5657C14.0157 16.7157 13.8122 16.8 13.6 16.8C13.3878 16.8 13.1843 16.7157 13.0343 16.5657C12.8843 16.4157 12.8 16.2122 12.8 16V11.2C12.8 10.9878 12.8843 10.7843 13.0343 10.6343C13.1843 10.4843 13.3878 10.4 13.6 10.4Z",fill:"white"}})])},U=[],z={name:"wasteIcon"},G=z,W=Object(l["a"])(G,q,U,!1,null,"f0835c60",null),J=W.exports,K=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M19.4042 7.29413L16.6642 4.5442C16.3066 4.20708 15.838 4.01365 15.3475 4.0007C14.8571 3.98774 14.379 4.15617 14.0042 4.47395L5.0042 13.5065C4.68097 13.8337 4.47971 14.2625 4.4342 14.7209L4.0042 18.906C3.99073 19.053 4.00974 19.2012 4.05986 19.34C4.10999 19.4788 4.19001 19.6047 4.2942 19.7089C4.38764 19.8019 4.49846 19.8755 4.6203 19.9255C4.74213 19.9754 4.8726 20.0007 5.0042 20H5.0942L9.2642 19.6186C9.721 19.5729 10.1482 19.3709 10.4742 19.0465L19.4742 10.0139C19.8235 9.64357 20.0123 9.14933 19.9992 8.63952C19.9861 8.12971 19.7721 7.64591 19.4042 7.29413ZM9.0842 17.6114L6.0842 17.8924L6.3542 14.8815L12.0042 9.2813L14.7042 11.9911L9.0842 17.6114ZM16.0042 10.6462L13.3242 7.95652L15.2742 5.94928L18.0042 8.68916L16.0042 10.6462Z",fill:"white"}})])},Q=[],X={name:"editIcon"},Y=X,tt=Object(l["a"])(Y,K,Q,!1,null,"6fd27fff",null),et=tt.exports,it=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M2.5 13.75L11.25 2.5V8.75C26.1913 8.75 27.915 20.8475 27.5 27.5C26.8725 24.1438 26.5813 18.75 11.25 18.75V25L2.5 13.75Z",stroke:"#616161","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])},at=[],nt={name:"backIcon"},ot=nt,st=Object(l["a"])(ot,it,at,!1,null,"76f211ad",null),rt=st.exports,lt={name:"News",components:{BackIcon:rt,EditIcon:et,WasteIcon:J},data:function(){return{page:"news",all:!0,news:"",newNew:{id:0,title:"",text:"",plainText:""},currentNew:{id:0,title:"",text:""},titleRules:[function(t){return!!t||"Необходимо ввести заголовок"}],formTitle:"Добавление новости",formBtnText:"Добавить новость",addForm:!1,alertError:!1,alertSuccess:!1,alertMsg:"",options:{},editorConfig:{printLog:!1,uploadImgUrl:"http://localhost:2233/api/upload",menus:["source","|","bold","underline","italic","strikethrough","eraser","forecolor","bgcolor","|","quote","fontfamily","fontsize","head","unorderlist","orderlist","alignleft","aligncenter","alignright","|","link","unlink","table","|","img","video","insertcode","|","undo","redo","fullscreen"],useLang:"en",pasteText:!0},disableEditor:{printLog:!1,disable:!0}}},created:function(){localStorage.getItem("auth_token")?(this.$emit("set-auth"),b.a.ajaxSetup({headers:{Authorization:"Token "+localStorage.getItem("auth_token")}}),this.loadData()):sessionStorage.getItem("auth_token")?(this.$emit("set-auth"),b.a.ajaxSetup({headers:{Authorization:"Token "+sessionStorage.getItem("auth_token")}}),this.loadData()):this.$router.push({name:"Login"})},methods:{onChange:function(){console.log(this.newNew.text.text())},uploadCallback:function(t){console.log("uploaded url",t)},loadData:function(){var t=this;b.a.ajax({url:this.$hostname+"time-tracking/news",type:"GET",success:function(e){t.news=e.data.data},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}})},addNew:function(){var t=this;console.log(this.newNew.id+" "+this.newNew.title),console.log(this.newNew.text),this.newNew.id>0?this.editNew():b.a.ajax({url:this.$hostname+"time-tracking/news",type:"POST",data:{title:this.newNew.title,text:this.newNew.text},success:function(){t.alertMsg="Новость добавлена",t.loadData(),t.addForm=!1},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}})},editNew:function(){var t=this;b.a.ajax({url:this.$hostname+"time-tracking/news",type:"PUT",data:{id:this.newNew.id,title:this.newNew.title,text:this.newNew.text},success:function(){t.alertMsg="Новость изменена",t.loadData(),t.currentNew={id:t.newNew.id,title:t.newNew.title,text:t.newNew.text},t.closeForm()},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}})},deleteNew:function(t){var e=this;b.a.ajax({url:this.$hostname+"time-tracking/news",type:"DELETE",data:{id:t},success:function(){e.alertMsg="Новость удалена",e.loadData(),e.all=!0},error:function(t){e.alertError=!0,e.alertMsg="Непредвиденная ошибка",console.log(t.data)}})},openAddForm:function(){this.formTitle="Добавление новости",this.formBtnText="Добавить новость",this.addForm=!0},openEditForm:function(t,e,i){this.formTitle="Редактирование новости",this.formBtnText="Сохранить новость",this.newNew={id:t,title:e,text:i},this.addForm=!0},closeForm:function(){this.addForm=!1,this.newNew={title:"",text:""}},openNew:function(t){this.currentNew=t,this.currentNew.text=this.currentNew.text.replaceAll("&lt;","<").replaceAll("&gt;",">"),console.log(this.currentNew.text.replaceAll("&lt;","<").replaceAll("&gt;",">")),this.all=!1}}},ct=lt,ut=i("b0af"),dt=i("99d9"),ft=i("169a"),mt=i("132d"),ht=i("8860"),vt=i("da13"),pt=i("5d23"),_t=i("34c3"),gt=i("2fa4"),bt=i("71d9"),Ct=Object(l["a"])(ct,Z,R,!1,null,"69d2a896",null),wt=Ct.exports;u()(Ct,{VBtn:D["a"],VCard:ut["a"],VCardActions:dt["a"],VCardText:dt["b"],VDialog:ft["a"],VIcon:mt["a"],VList:ht["a"],VListItem:vt["a"],VListItemContent:pt["a"],VListItemIcon:_t["a"],VListItemTitle:pt["c"],VSpacer:gt["a"],VTextField:M["a"],VToolbar:bt["a"]});var xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"objects flex-content"},[a("div",{staticClass:"summary-box"},[a("div",{staticClass:"summary-box__title"},[a("h3",[t._v("Объекты")]),t.all?t._e():a("div",{staticClass:"addition-btn",on:{click:function(e){t.all=!0}}},[a("span",[t._v("К списку объектов")]),a("back-icon")],1),t.all?a("div",{staticClass:" addition-btn content-list__filters-mobile",on:{click:t.openFilters}},[t._v("Фильтры ")]):t._e()]),t.all?a("div",{staticClass:"objects-all"},[a("div",{staticClass:"content-list__filters"},[a("v-icon",{attrs:{color:"grey lighten-1"},on:{click:t.closeFilters}},[t._v(" $deleteIcon ")]),a("v-text-field",{attrs:{placeholder:"Адрес",outlined:""},model:{value:t.filter.address,callback:function(e){t.$set(t.filter,"address",e)},expression:"filter.address"}}),a("v-select",{attrs:{items:t.selects,outlined:""},model:{value:t.filter.client,callback:function(e){t.$set(t.filter,"client",e)},expression:"filter.client"}}),a("v-menu",{ref:"menu_filter",attrs:{"close-on-content-click":!1,"return-value":t.filter.dates,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){return t.$set(t.filter,"dates",e)},"update:return-value":function(e){return t.$set(t.filter,"dates",e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{placeholder:"Начало работ",readonly:"",outlined:""},model:{value:t.filter.dates,callback:function(e){t.$set(t.filter,"dates",e)},expression:"filter.dates"}},"v-text-field",n,!1),i))]}}],null,!1,240686409),model:{value:t.datePickers.menu_filter,callback:function(e){t.$set(t.datePickers,"menu_filter",e)},expression:"datePickers.menu_filter"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:"",range:"",color:"primary"},model:{value:t.filter.dates,callback:function(e){t.$set(t.filter,"dates",e)},expression:"filter.dates"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.datePickers.menu_filter=!1}}},[t._v(" Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu_filter.save(t.filter.dates)}}},[t._v("OK")])],1)],1)],1),t.all?a("v-list",{staticClass:"objects__list content-list",attrs:{"three-line":""}},[t._l(t.objects,(function(e){return[e.active===t.archive&&(e.city+" "+e.street+" "+e.house).includes(t.filter.address)&&("Все"===t.filter.client||e.client_id.name===t.filter.client)&&("undefined"===typeof t.filter.dates[0]||e.date_start>=t.filter.dates[0])&&(e.date_start<=t.filter.dates[1]||"undefined"===typeof t.filter.dates[1])?a("v-list-item",{key:e.id},[a("v-list-item-content",{on:{click:function(i){return t.openObject(e)}}},[a("v-list-item-title",[t._v(t._s(e.city)+" "+t._s(e.street)+" "+t._s(e.house))]),a("v-list-item-subtitle",[a("span",[t._v(t._s(e.date_start)+" - "+t._s(e.date_end))]),a("br"),a("span",[t._v(t._s(e.client_id.name))])])],1),a("v-list-item-action",[a("v-icon",{attrs:{color:"grey lighten-1"},on:{click:function(i){return t.openConfirmDeleteDialog(e.id)}}},[t._v("$deleteIcon")])],1)],1):t._e()]}))],2):t._e(),a("v-list",{staticClass:"content-list__btns"},[t.archive?t._e():a("v-list-item",{staticClass:"content-list__btns-add",on:{click:t.openAddForm}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-plus")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Добавить объект")])],1)],1),t.archive?a("v-list-item",{staticClass:"content-list__btns-add",on:{click:function(e){t.archive=!t.archive}}},[a("v-list-item-icon",[a("v-icon",[t._v("$archive")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Выйти из архива")])],1)],1):a("v-list-item",{staticClass:"content-list__btns-add",on:{click:function(e){t.archive=!t.archive}}},[a("v-list-item-icon",[a("v-icon",[t._v("$archive")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Архив")])],1)],1)],1)],1):a("div",{staticClass:"objects-open"},[a("div",{staticClass:"objects-open__info profile__info"},[a("h3",[t._v("Информация об объекте")]),a("div",{staticClass:"news-open__actions open__actions"},[a("div",{staticClass:"addition-btn",on:{click:function(e){return t.openEditForm(t.currentObject)}}},[a("edit-icon"),t._v(" Редактировать объект ")],1),a("div",{staticClass:"addition-btn",on:{click:function(e){return t.deleteObject(t.currentObject.id)}}},[a("waste-icon"),t._v(" Удалить объект ")],1)]),a("ul",[a("li",[a("span",{staticClass:"profile__info-title"},[t._v("Объект сдан")]),a("v-checkbox",{on:{change:t.openConfirmArchiveDialog},model:{value:t.currentObject.active,callback:function(e){t.$set(t.currentObject,"active",e)},expression:"currentObject.active"}})],1),a("li",[a("span",{staticClass:"profile__info-title"},[t._v("Клиент")]),a("span",{staticClass:"profile__info-content"},[t._v(t._s(t.currentObject.client_id.name))])]),a("li",[a("span",{staticClass:"profile__info-title"},[t._v("Начало работ")]),a("span",{staticClass:"profile__info-content"},[t._v(t._s(t.currentObject.date_start))])]),a("li",[a("span",{staticClass:"profile__info-title"},[t._v("Окончание работ")]),a("span",{staticClass:"profile__info-content"},[t._v(t._s(t.currentObject.date_end))])])]),a("h3",[t._v("Адрес")]),a("ul",[a("li",[a("span",{staticClass:"profile__info-title"},[t._v("Улица")]),a("span",{staticClass:"profile__info-content"},[t._v(t._s(t.currentObject.street))])]),a("li",[a("span",{staticClass:"profile__info-title"},[t._v("Дом")]),a("span",{staticClass:"profile__info-content"},[t._v(t._s(t.currentObject.house))])]),a("li",[a("span",{staticClass:"profile__info-title"},[t._v("Подъезд")]),a("span",{staticClass:"profile__info-content"},[t._v(t._s(t.currentObject.entrance))])]),a("li",[a("span",{staticClass:"profile__info-title"},[t._v("Квартира")]),a("span",{staticClass:"profile__info-content"},[t._v(t._s(t.currentObject.flat))])]),a("li",[a("span",{staticClass:"profile__info-title"},[t._v("Город")]),a("span",{staticClass:"profile__info-content"},[t._v(t._s(t.currentObject.city))])]),a("li",[a("span",{staticClass:"profile__info-title"},[t._v("Индекс")]),a("span",{staticClass:"profile__info-content"},[t._v(t._s(t.currentObject.index))])])]),a("h3",[t._v("Работники")]),a("ul"),a("h3",[t._v("Фото объекта")]),a("v-slide-group",{staticClass:"pa-4 objects-open__slider",attrs:{"active-class":"slide-active","show-arrows":""},model:{value:t.photos,callback:function(e){t.photos=e},expression:"photos"}},t._l(t.photos,(function(t){return a("v-slide-item",{key:t.id},[a("v-card",{staticClass:"ma-4",attrs:{height:"250",width:"300"}},[a("v-row",{staticClass:"fill-height",attrs:{align:"center",justify:"center"}},[a("v-scale-transition",[a("v-img",{attrs:{src:i("5469")("./media"+t.photo_path)}})],1)],1)],1)],1)})),1)],1)])]),a("v-dialog",{attrs:{persistent:""},model:{value:t.addForm,callback:function(e){t.addForm=e},expression:"addForm"}},[a("v-card",[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:t.closeForm}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("h3",[t._v(t._s(t.formTitle))]),a("v-card-text",[a("v-text-field",{attrs:{placeholder:"Индекс*",rules:t.reqRules,required:"",outlined:""},model:{value:t.newObject.index,callback:function(e){t.$set(t.newObject,"index",e)},expression:"newObject.index"}}),a("v-text-field",{attrs:{placeholder:"Город*",rules:t.reqRules,required:"",outlined:""},model:{value:t.newObject.city,callback:function(e){t.$set(t.newObject,"city",e)},expression:"newObject.city"}}),a("v-text-field",{attrs:{placeholder:"Улица*",rules:t.reqRules,required:"",outlined:""},model:{value:t.newObject.street,callback:function(e){t.$set(t.newObject,"street",e)},expression:"newObject.street"}}),a("v-text-field",{attrs:{placeholder:"Дом*",rules:t.reqRules,required:"",outlined:""},model:{value:t.newObject.house,callback:function(e){t.$set(t.newObject,"house",e)},expression:"newObject.house"}}),a("v-text-field",{attrs:{placeholder:"Подъезд",outlined:""},model:{value:t.newObject.entrance,callback:function(e){t.$set(t.newObject,"entrance",e)},expression:"newObject.entrance"}}),a("v-text-field",{attrs:{placeholder:"Квартира",outlined:""},model:{value:t.newObject.flat,callback:function(e){t.$set(t.newObject,"flat",e)},expression:"newObject.flat"}}),a("v-menu",{ref:"menu_start",attrs:{"close-on-content-click":!1,"return-value":t.newObject.date_start,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){return t.$set(t.newObject,"date_start",e)},"update:return-value":function(e){return t.$set(t.newObject,"date_start",e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{placeholder:"Начало работ*",readonly:"",outlined:""},model:{value:t.newObject.date_start,callback:function(e){t.$set(t.newObject,"date_start",e)},expression:"newObject.date_start"}},"v-text-field",n,!1),i))]}}]),model:{value:t.datePickers.menu_start,callback:function(e){t.$set(t.datePickers,"menu_start",e)},expression:"datePickers.menu_start"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:"",color:"primary"},model:{value:t.newObject.date_start,callback:function(e){t.$set(t.newObject,"date_start",e)},expression:"newObject.date_start"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.datePickers.menu_start=!1}}},[t._v(" Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu_start.save(t.newObject.date_start)}}},[t._v("OK")])],1)],1),a("v-menu",{ref:"menu_end",attrs:{"close-on-content-click":!1,"return-value":t.newObject.date_end,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(e){return t.$set(t.newObject,"date_end",e)},"update:return-value":function(e){return t.$set(t.newObject,"date_end",e)}},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.on,n=e.attrs;return[a("v-text-field",t._g(t._b({attrs:{placeholder:"Окончание работ",readonly:"",outlined:""},model:{value:t.newObject.date_end,callback:function(e){t.$set(t.newObject,"date_end",e)},expression:"newObject.date_end"}},"v-text-field",n,!1),i))]}}]),model:{value:t.datePickers.menu_end,callback:function(e){t.$set(t.datePickers,"menu_end",e)},expression:"datePickers.menu_end"}},[a("v-date-picker",{attrs:{"no-title":"",scrollable:"",color:"primary"},model:{value:t.newObject.date_end,callback:function(e){t.$set(t.newObject,"date_end",e)},expression:"newObject.date_end"}},[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){t.datePickers.menu_end=!1}}},[t._v(" Cancel")]),a("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(e){return t.$refs.menu_end.save(t.newObject.date_end)}}},[t._v("OK")])],1)],1),a("v-select",{ref:"positionCombobox",attrs:{items:t.clients,"item-text":"name","item-value":"id",placeholder:"Клиент*",outlined:"",dense:""},model:{value:t.newObject.client_id,callback:function(e){t.$set(t.newObject,"client_id",e)},expression:"newObject.client_id"}})],1),a("v-card-actions",[a("div",{staticClass:"addition-btn"},[a("add-photo-icon"),t._v(" Загрузить изображение ")],1),a("v-spacer"),a("v-btn",{staticClass:"action-btn",attrs:{color:"primary"},on:{click:t.addObject}},[t._v(t._s(t.formBtnText))])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500"},model:{value:t.confirmDeleteDialog,callback:function(e){t.confirmDeleteDialog=e},expression:"confirmDeleteDialog"}},[a("v-card",[a("v-card-title",[t._v(" Удаление объекта ")]),a("v-card-text",[t._v("Вы действительно хотите удалить объект? Отменить это действие будет невозможно")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.confirmDeleteDialog=!1}}},[t._v("Отменить")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.deleteObject}},[t._v("Подтвердить")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500"},model:{value:t.confirmArchiveDialog,callback:function(e){t.confirmArchiveDialog=e},expression:"confirmArchiveDialog"}},[a("v-card",[a("v-card-title",[t._v(" Сдача объекта ")]),a("v-card-text",[t._v(" Вы действительно хотите сдать объект? После подтверждения объект будет перемещен в архив ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary",text:""},on:{click:t.cancelConfirmArchiveDialog}},[t._v(" Отменить ")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.editObjectArchive}},[t._v("Подтвердить")])],1)],1)],1)],1)},kt=[],jt=(i("0481"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M20.2869 16.6843L15.0022 11.3997L9.71753 16.6843L11.0433 18.0101L14.0647 14.9888V29.0625H15.9397V14.9888L18.9611 18.0101L20.2869 16.6843Z",fill:"#616161"}}),i("path",{attrs:{d:"M23.4375 9.46014V9.375C23.4375 4.72266 19.6523 0.9375 15 0.9375C10.3477 0.9375 6.5625 4.72266 6.5625 9.375V9.52096C5.1739 9.78301 3.89379 10.4498 2.88316 11.4375C2.26815 12.0344 1.77908 12.7486 1.44489 13.5378C1.11069 14.3271 0.938164 15.1753 0.9375 16.0324C0.9375 17.8557 1.6868 19.5926 3.04746 20.9231C4.37695 22.2231 6.17215 22.9688 7.97285 22.9688H11.7188V21.0938H7.97285C5.22387 21.0938 2.8125 18.7286 2.8125 16.0324C2.8125 13.5557 4.90078 11.467 7.56662 11.2772L8.4375 11.2151V9.375C8.4375 7.63452 9.1289 5.96532 10.3596 4.73461C11.5903 3.5039 13.2595 2.8125 15 2.8125C16.7405 2.8125 18.4097 3.5039 19.6404 4.73461C20.8711 5.96532 21.5625 7.63452 21.5625 9.375V11.2523L22.4883 11.2641C25.2112 11.2985 27.1875 13.3039 27.1875 16.0324C27.1875 18.8705 25.0984 21.0938 22.4314 21.0938H18.2812V22.9688H22.4314C23.3247 22.9717 24.2088 22.7885 25.0274 22.4308C25.846 22.0731 26.581 21.5489 27.1857 20.8914C28.396 19.5902 29.0625 17.8646 29.0625 16.0324C29.0625 12.6083 26.7021 9.92531 23.4375 9.46014Z",fill:"#616161"}})])}),Vt=[],Ot={name:"addPhotoIcon"},Pt=Ot,yt=Object(l["a"])(Pt,jt,Vt,!1,null,"e50887ec",null),$t=yt.exports,Dt={name:"Objects",components:{EditIcon:et,WasteIcon:J,BackIcon:rt,AddPhotoIcon:$t},data:function(){return{page:"objects",objects:"",all:!0,archive:!1,newObject:{id:0,index:"",city:"",street:"",house:"",entrance:"",flat:"",date_start:"",date_end:"",active:!1,client_id:""},currentObject:{id:0,index:"",city:"",street:"",house:"",entrance:"",flat:"",date_start:"",date_end:"",active:!1,client_id:""},photo:"/objects/A3DPhhAL6Zg.png",photos:"",clients:['ООО "Праздник"'],selects:["Все",'ООО "Праздник"','ООО "Цветы"'],filter:{address:"",client:"Все",dates:[]},datePickers:{menu_filter:!1,menu_start:!1,menu_end:!1},formTitle:"Добавление объекта",formBtnText:"Добавить объект",addForm:!1,confirmArchiveDialog:!1,confirmDeleteDialog:!1,reqRules:[function(t){return!!t||"Необходимо заполнить поле"}],alertError:!1,alertSuccess:!1,alertMsg:""}},created:function(){localStorage.getItem("auth_token")?(this.$emit("set-auth"),b.a.ajaxSetup({headers:{Authorization:"Token "+localStorage.getItem("auth_token")}}),this.loadData(),this.loadClients()):sessionStorage.getItem("auth_token")?(this.$emit("set-auth"),b.a.ajaxSetup({headers:{Authorization:"Token "+sessionStorage.getItem("auth_token")}}),this.loadData(),this.loadClients()):this.$router.push({name:"Login"})},methods:{loadData:function(){var t=this;b.a.ajax({url:this.$hostname+"time-tracking/objects",type:"GET",success:function(e){t.objects=e.data.data},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}})},loadClients:function(){var t=this;b.a.ajax({url:this.$hostname+"time-tracking/clients",type:"GET",success:function(e){t.clients=e.data.data},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}})},addObject:function(){var t=this;0===this.newObject.id?b.a.ajax({url:this.$hostname+"time-tracking/objects",type:"POST",data:{index:this.newObject.index,city:this.newObject.city,street:this.newObject.street,house:this.newObject.house,entrance:this.newObject.entrance,flat:this.newObject.flat,date_start:this.newObject.date_start,date_end:this.newObject.date_end,active:this.newObject.active,client_id:this.newObject.client_id},success:function(){console.log("Объект добавлен "),t.loadData(),t.closeForm()},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}}):this.editObject()},editObject:function(){var t=this;b.a.ajax({url:this.$hostname+"time-tracking/objects",type:"PUT",data:this.newObject,success:function(){console.log("Объект изменен "),t.loadData(),t.closeForm()},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}})},editObjectArchive:function(){var t=this;b.a.ajax({url:this.$hostname+"time-tracking/objects",type:"PUT",data:this.currentObject,success:function(){console.log("Объект перемещен в архив"),t.loadData(),t.confirmArchiveDialog=!1},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}})},deleteObject:function(){var t=this;b.a.ajax({url:this.$hostname+"time-tracking/objects",type:"DELETE",data:{id:this.currentObject.id},success:function(){console.log("Объект удален"),t.loadData()},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}})},openObject:function(t){this.currentObject=t,this.photo=this.loadPhoto(t.id),this.all=!1},loadPhoto:function(t){var e=this;b.a.ajax({url:this.$hostname+"time-tracking/objects/photos/"+t,type:"GET",success:function(t){e.photos=t.data.data},error:function(t){e.alertError=!0,e.alertMsg="Непредвиденная ошибка",console.log(t.data)}})},openAddForm:function(){this.formTitle="Добавление объекта",this.formBtnText="Добавить объект",this.addForm=!0},openEditForm:function(t){this.formTitle="Редактирование объекта",this.formBtnText="Сохранить объект",this.newObject=t,this.addForm=!0},openConfirmArchiveDialog:function(){this.currentObject.active?this.confirmArchiveDialog=!0:this.editObjectArchive()},cancelConfirmArchiveDialog:function(){this.currentObject.active=!1,this.confirmArchiveDialog=!1},openConfirmDeleteDialog:function(t){this.currentObject.id=t,this.confirmDeleteDialog=!0},closeForm:function(){this.addForm=!1,this.newObject={id:0,index:"",city:"",street:"",house:"",entrance:"",flat:"",date_start:"",date_end:"",active:!1,client_id:""}},openFilters:function(){console.log("open filters"),b()(".content-list__filters").addClass("open"),b()(".content-list__btns").addClass("hidden")},closeFilters:function(){console.log("open filters"),b()(".content-list__filters").removeClass("open"),b()(".content-list__btns").removeClass("hidden")}}},It=Dt,Lt=i("2e4b"),Mt=i("1800"),Ft=i("e449"),Et=i("0fd9"),Tt=i("0789"),St=i("b974"),At=i("7efd"),Nt=i("9dbe"),Ht=Object(l["a"])(It,xt,kt,!1,null,"5449acec",null),Bt=Ht.exports;u()(Ht,{VBtn:D["a"],VCard:ut["a"],VCardActions:dt["a"],VCardText:dt["b"],VCardTitle:dt["c"],VCheckbox:I["a"],VDatePicker:Lt["a"],VDialog:ft["a"],VIcon:mt["a"],VImg:k["a"],VList:ht["a"],VListItem:vt["a"],VListItemAction:Mt["a"],VListItemContent:pt["a"],VListItemIcon:_t["a"],VListItemSubtitle:pt["b"],VListItemTitle:pt["c"],VMenu:Ft["a"],VRow:Et["a"],VScaleTransition:Tt["d"],VSelect:St["a"],VSlideGroup:At["a"],VSlideItem:Nt["a"],VSpacer:gt["a"],VTextField:M["a"],VToolbar:bt["a"]});var Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"workers flex-content"},[a("div",{staticClass:"summary-box"},[a("div",{staticClass:"summary-box__title"},[a("h3",[t._v("Работники")]),t.all?t._e():a("div",{staticClass:"addition-btn",on:{click:function(e){t.all=!0}}},[a("span",[t._v("К списку работников")]),a("back-icon")],1),t.all?a("div",{staticClass:" addition-btn content-list__filters-mobile",on:{click:t.openFilters}},[t._v("Фильтры ")]):t._e()]),t.all?a("div",{staticClass:"workers-all"},[a("div",{staticClass:"content-list__filters"},[a("v-icon",{attrs:{color:"grey lighten-1"},on:{click:t.closeFilters}},[t._v(" $deleteIcon ")]),a("v-text-field",{attrs:{placeholder:"Фамилия Имя",outlined:""},model:{value:t.filter.name,callback:function(e){t.$set(t.filter,"name",e)},expression:"filter.name"}}),a("v-select",{attrs:{items:t.selects,placeholder:"Должность",outlined:""},model:{value:t.filter.position,callback:function(e){t.$set(t.filter,"position",e)},expression:"filter.position"}}),a("v-text-field",{attrs:{placeholder:"Почта",outlined:""},model:{value:t.filter.email,callback:function(e){t.$set(t.filter,"email",e)},expression:"filter.email"}})],1),a("v-list",{staticClass:"workers__list content-list",attrs:{"three-line":""}},[t._l(t.profiles,(function(e){return[e.active!==t.archive&&e.auth_user_id.email.includes(t.filter.email)&&(e.name+" "+e.lastname).includes(t.filter.name)&&(e.position===t.filter.position||"Все"===t.filter.position)?a("v-list-item",{key:e.id},[a("v-list-item-avatar",{staticClass:"content-list__image"},[null!=e.photo_path?a("v-img",{attrs:{src:i("5469")("./media"+e.photo_path)}}):t._e()],1),a("v-list-item-content",{on:{click:function(i){return t.openProfile(e)}}},[a("v-list-item-title",[t._v(t._s(e.name)+" "+t._s(e.lastname))]),a("v-list-item-subtitle",[a("span",[t._v(t._s(e.position))]),a("br"),a("span",[t._v(t._s(e.auth_user_id.email))])])],1),a("v-list-item-action",[a("v-icon",{attrs:{color:"grey lighten-1"},on:{click:function(i){return t.openConfirmDeleteDialog(e)}}},[t._v(" $deleteIcon ")])],1)],1):t._e()]}))],2),a("v-list",{staticClass:"content-list__btns"},[t.archive?t._e():a("v-list-item",{staticClass:"content-list__btns-add",on:{click:t.openAddForm}},[a("v-list-item-icon",[a("v-icon",[t._v("mdi-plus")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Добавить работника")])],1)],1),t.archive?a("v-list-item",{staticClass:"content-list__btns-add",on:{click:function(e){t.archive=!t.archive}}},[a("v-list-item-icon",[a("v-icon",[t._v("$archive")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Выйти из архива")])],1)],1):a("v-list-item",{staticClass:"content-list__btns-add",on:{click:function(e){t.archive=!t.archive}}},[a("v-list-item-icon",[a("v-icon",[t._v("$archive")])],1),a("v-list-item-content",[a("v-list-item-title",[t._v("Архив")])],1)],1)],1)],1):t._e(),t.all?t._e():a("div",{staticClass:"workers-open"},[a("div",{staticClass:"profile__image"},[null!=t.currentProfile.photo_path?a("v-img",{attrs:{"lazy-src":i("5469")("./media"+t.currentProfile.photo_path),src:i("5469")("./media"+t.currentProfile.photo_path)}}):t._e(),a("div",{staticClass:"profile__change-photo",on:{click:function(e){t.photoDialog=!0}}},[t._v("Сменить фото")])],1),a("div",{staticClass:"profile__info"},[a("h3",[t._v("Личная информация")]),a("ul",[a("li",[a("span",{staticClass:"profile__info-title"},[t._v("Имя")]),a("span",{staticClass:"profile__info-content"},[t._v(t._s(t.currentProfile.name))])]),a("li",[a("span",{staticClass:"profile__info-title"},[t._v("Фамилия")]),a("span",{staticClass:"profile__info-content"},[t._v(t._s(t.currentProfile.lastname))])]),a("li",[a("span",{staticClass:"profile__info-title"},[t._v("Должность")]),a("span",{staticClass:"profile__info-content"},[t._v(t._s(t.currentProfile.position))])])]),a("h3",[t._v("Контакты")]),a("ul",[a("li",[a("span",{staticClass:"profile__info-title"},[t._v("Телефон")]),a("span",{staticClass:"profile__info-content"},[t._v(t._s(t.currentProfile.phone))])]),a("li",[a("span",{staticClass:"profile__info-title"},[t._v("E-mail")]),a("span",{staticClass:"profile__info-content"},[t._v(t._s(t.currentProfile.auth_user_id.email))])])]),a("ul",[a("li",[a("span",{staticClass:"profile__info-title"},[t._v("Работает")]),a("v-checkbox",{on:{change:t.openConfirmArchiveDialog},model:{value:t.currentProfile.active,callback:function(e){t.$set(t.currentProfile,"active",e)},expression:"currentProfile.active"}})],1)]),a("div",{staticClass:"news-open__actions open__actions"},[a("div",{staticClass:"addition-btn",on:{click:function(e){return t.openEditForm(t.currentProfile)}}},[a("edit-icon"),t._v(" Редактировать объект ")],1),a("div",{staticClass:"addition-btn",on:{click:function(e){return t.openConfirmDeleteDialog(t.currentProfile)}}},[a("waste-icon"),t._v(" Удалить объект ")],1)])])])]),a("v-dialog",{attrs:{persistent:""},model:{value:t.addForm,callback:function(e){t.addForm=e},expression:"addForm"}},[a("v-card",[a("v-toolbar",{attrs:{flat:""}},[a("v-spacer"),a("v-btn",{attrs:{icon:""},on:{click:t.closeForm}},[a("v-icon",[t._v("mdi-close")])],1)],1),a("h3",[t._v(t._s(t.formTitle))]),a("v-card-text",[a("v-text-field",{attrs:{placeholder:"Фамилия*",rules:t.reqRules,required:"",outlined:""},model:{value:t.newProfile.lastname,callback:function(e){t.$set(t.newProfile,"lastname",e)},expression:"newProfile.lastname"}}),a("v-text-field",{attrs:{placeholder:"Имя*",rules:t.reqRules,required:"",outlined:""},model:{value:t.newProfile.name,callback:function(e){t.$set(t.newProfile,"name",e)},expression:"newProfile.name"}}),a("v-combobox",{ref:"positionCombobox",attrs:{items:t.positions,placeholder:"Должность*",outlined:"",dense:""},model:{value:t.newProfile.position,callback:function(e){t.$set(t.newProfile,"position",e)},expression:"newProfile.position"}}),a("v-text-field",{attrs:{placeholder:"Почта*",rules:t.emailRules,required:"",outlined:""},model:{value:t.newProfile.email,callback:function(e){t.$set(t.newProfile,"email",e)},expression:"newProfile.email"}}),a("v-text-field",{attrs:{placeholder:"Телефон*",rules:t.phoneRules,required:"",outlined:""},model:{value:t.newProfile.phone,callback:function(e){t.$set(t.newProfile,"phone",e)},expression:"newProfile.phone"}})],1),a("v-card-actions",[a("div",{staticClass:"addition-btn"},[a("pdf-icon"),t._v(" Конвертировать в .pdf ")],1),a("v-spacer"),a("v-btn",{staticClass:"action-btn",attrs:{color:"primary"},on:{click:t.addUser}},[t._v(t._s(t.formBtnText))])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500"},model:{value:t.confirmDeleteDialog,callback:function(e){t.confirmDeleteDialog=e},expression:"confirmDeleteDialog"}},[a("v-card",[a("v-card-title",[t._v(" Удаление работника ")]),a("v-card-text",[t._v("Вы действительно хотите удалить профиль? Отменить это действие будет невозможно")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(e){t.confirmDeleteDialog=!1}}},[t._v("Отменить")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:function(e){return t.deleteUser(null)}}},[t._v("Подтвердить")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500"},model:{value:t.confirmArchiveDialog,callback:function(e){t.confirmArchiveDialog=e},expression:"confirmArchiveDialog"}},[a("v-card",[a("v-card-title",[t._v(" Увольнение работника ")]),a("v-card-text",[t._v(" Вы действительно хотите уволить работника? После подтверждения профиль будет перемещен в архив ")]),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"secondary",text:""},on:{click:t.cancelConfirmArchiveDialog}},[t._v(" Отменить ")]),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.editProfile}},[t._v("Подтвердить")])],1)],1)],1),a("v-dialog",{attrs:{"max-width":"500"},model:{value:t.photoDialog,callback:function(e){t.photoDialog=e},expression:"photoDialog"}},[a("v-card",[a("v-card-title",[t._v(" Сменить фото ")]),a("v-card-text",[a("v-file-input",{attrs:{placeholder:"Фото профиля",accept:"image/*","prepend-icon":"",outlined:""},model:{value:t.photoField,callback:function(e){t.photoField=e},expression:"photoField"}})],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary",text:""},on:{click:t.savePhoto}},[t._v("Сохранить")])],1)],1)],1)],1)},Rt=[],qt=(i("b0c0"),i("ac1f"),i("1276"),i("d3b7"),i("5cc6"),i("9a8c"),i("a975"),i("735e"),i("c1ac"),i("d139"),i("3a7b"),i("d5d6"),i("82f8"),i("e91f"),i("60bd"),i("5f96"),i("3280"),i("3fcc"),i("ca91"),i("25a1"),i("cd26"),i("3c5d"),i("2954"),i("649e"),i("219c"),i("170b"),i("b39a"),i("72f7"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M10.3338 18.3501C10.1038 18.3501 9.94877 18.3726 9.86877 18.3951V19.8676C9.96377 19.8901 10.0825 19.8963 10.2463 19.8963C10.845 19.8963 11.2138 19.5938 11.2138 19.0826C11.2138 18.6251 10.8963 18.3501 10.3338 18.3501ZM14.6925 18.3651C14.4425 18.3651 14.28 18.3876 14.1838 18.4101V21.6726C14.28 21.6951 14.435 21.6951 14.575 21.6951C15.5963 21.7026 16.2613 21.1401 16.2613 19.9501C16.2688 18.9126 15.6625 18.3651 14.6925 18.3651Z",fill:"#616161"}}),i("path",{attrs:{d:"M17.5 2.5H7.5C6.83696 2.5 6.20107 2.76339 5.73223 3.23223C5.26339 3.70107 5 4.33696 5 5V25C5 25.663 5.26339 26.2989 5.73223 26.7678C6.20107 27.2366 6.83696 27.5 7.5 27.5H22.5C23.163 27.5 23.7989 27.2366 24.2678 26.7678C24.7366 26.2989 25 25.663 25 25V10L17.5 2.5ZM11.8725 20.2375C11.4863 20.6 10.9162 20.7625 10.2525 20.7625C10.1238 20.7639 9.99516 20.7564 9.8675 20.74V22.5225H8.75V17.6025C9.25432 17.5273 9.7639 17.493 10.2737 17.5C10.97 17.5 11.465 17.6325 11.7987 17.8988C12.1163 18.1513 12.3312 18.565 12.3312 19.0525C12.33 19.5425 12.1675 19.9563 11.8725 20.2375ZM16.6313 21.9313C16.1063 22.3675 15.3075 22.575 14.3313 22.575C13.7463 22.575 13.3325 22.5375 13.0513 22.5V17.6038C13.5558 17.5301 14.0652 17.4954 14.575 17.5C15.5212 17.5 16.1363 17.67 16.6163 18.0325C17.135 18.4175 17.46 19.0313 17.46 19.9125C17.46 20.8663 17.1112 21.525 16.6313 21.9313ZM21.25 18.4625H19.335V19.6013H21.125V20.5188H19.335V22.5238H18.2025V17.5375H21.25V18.4625ZM17.5 11.25H16.25V5L22.5 11.25H17.5Z",fill:"#616161"}})])}),Ut=[],zt={name:"pdfIcon"},Gt=zt,Wt=Object(l["a"])(Gt,qt,Ut,!1,null,"6bec5be6",null),Jt=Wt.exports,Kt={name:"Workers",components:{WasteIcon:J,EditIcon:et,BackIcon:rt,PdfIcon:Jt},data:function(){return{page:"home",all:!0,archive:!1,profiles:{},positions:["Администратор","Маляр","Строитель"],selects:["Все","Администратор","Маляр","Строитель"],newProfile:{lastname:"",name:"",position:"",email:"",phone:"",is_staff:!1},currentProfile:{id:0,auth_user_id:"",lastname:"",name:"",position:"",email:"",phone:"",is_staff:!1,active:!0,photo_path:null},filter:{name:"",position:"Все",email:""},formTitle:"Добавление работника",formBtnText:"Добавить работника",addForm:!1,confirmArchiveDialog:!1,confirmDeleteDialog:!1,photoField:null,photoDialog:!1,alertError:!1,alertMsg:"",reqRules:[function(t){return!!t||"Необходимо заполнить поле"}],emailRules:[function(t){return!!t||"Необходимо заполнить поле"}],phoneRules:[function(t){return!!t||"Необходимо заполнить поле"}]}},created:function(){localStorage.getItem("auth_token")?(this.$emit("set-auth"),b.a.ajaxSetup({headers:{Authorization:"Token "+localStorage.getItem("auth_token")}}),this.loadData()):sessionStorage.getItem("auth_token")?(this.$emit("set-auth"),b.a.ajaxSetup({headers:{Authorization:"Token "+sessionStorage.getItem("auth_token")}}),this.loadData()):this.$router.push({name:"Login"})},methods:{loadData:function(){var t=this;b.a.ajax({url:this.$hostname+"time-tracking/profiles",type:"GET",success:function(e){t.profiles=e.data.data},error:function(e){console.log(e),500===e.status?t.alertMsg="Ошибка соединения с сервером":t.alertMsg="Непредвиденная ошибка",t.alertError=!0}})},addUser:function(){var t=this;0!==this.newProfile.id?this.editProfile():("Администратор"===this.newProfile.position&&(this.newProfile.is_staff=!0),b.a.ajax({url:this.$hostname+"time-tracking/user",type:"POST",data:{username:this.newProfile.email,email:this.newProfile.email,is_staff:this.newProfile.is_staff,password:"12345678"},success:function(e){t.addProfile(e.data.data.id)},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}}))},addProfile:function(t){var e=this;b.a.ajax({url:this.$hostname+"time-tracking/profiles",type:"POST",data:{auth_user_id:t,name:this.newProfile.name,lastname:this.newProfile.lastname,position:this.newProfile.position,phone:this.newProfile.phone,active:!0},success:function(){e.alertMsg="Пользователь добавлен",e.loadData(),e.closeForm()},error:function(t){e.alertError=!0,e.alertMsg="Непредвиденная ошибка",console.log(t.data)}})},editProfile:function(){var t=this;b.a.ajax({url:this.$hostname+"time-tracking/profiles",type:"PUT",data:{id:this.currentProfile.id,auth_user_id:this.currentProfile.auth_user_id,name:this.currentProfile.name,lastname:this.currentProfile.lastname,position:this.currentProfile.position,phone:this.currentProfile.phone,active:this.currentProfile.active},success:function(){console.log("Профиль изменен"),t.confirmArchiveDialog=!1,t.addForm?t.editUser():t.loadData()},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}})},editUser:function(){var t=this;this.currentProfile.auth_user_id.email=this.newProfile.email,b.a.ajax({url:this.$hostname+"time-tracking/user",type:"PUT",data:{id:this.newProfile.auth_user_id.id,username:this.newProfile.email,email:this.newProfile.email},success:function(){console.log("Пользователь изменен"),t.loadData(),t.closeForm()},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}})},makeblob:function(t){var e=";base64,";if(-1===t.indexOf(e)){var i=t.split(","),a=i[0].split(":")[1],n=decodeURIComponent(i[1]);return new Blob([n],{type:a})}for(var o=t.split(e),s=o[0].split(":")[1],r=window.atob(o[1]),l=r.length,c=new Uint8Array(l),u=0;u<l;++u)c[u]=r.charCodeAt(u);return new Blob([c],{type:s})},savePhoto:function(){var t=this,e=document.querySelector("input[type=file]").files[0];console.log(this.photoField.name),this.currentProfile.photo_path="/users/"+this.photoField.name;var i,a=new FileReader;function n(t){i=btoa(t.target.result),console.log(i)}a.onload=n,a.readAsBinaryString(e),console.log(e),b.a.ajax({url:this.$hostname+"time-tracking/profiles/"+this.currentProfile.id,type:"PUT",processData:!1,data:{photo:i},success:function(){console.log("Профиль изменен"),t.loadData(),t.photoDialog=!1},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}}),console.log("done ajax")},deleteUser:function(t){var e=this;null==t&&(t=this.currentProfile.email),console.log(t),b.a.ajax({url:this.$hostname+"time-tracking/user",type:"DELETE",data:{email:t},success:function(){e.alertMsg="Пользователь удален",e.loadData(),e.confirmDeleteDialog=!1},error:function(t){e.alertError=!0,e.alertMsg="Непредвиденная ошибка",console.log(t.data)}})},openProfile:function(t){this.currentProfile=t,this.all=!1},closeForm:function(){this.addForm=!1,this.newProfile={lastname:"",name:"",position:"",email:"",phone:"",is_staff:!1}},openAddForm:function(){this.formTitle="Добавление работника",this.formBtnText="Добавить работника",this.addForm=!0},openEditForm:function(t){this.formTitle="Редактирование работника",this.formBtnText="Сохранить работника",this.newProfile=t,this.newProfile.email=t.auth_user_id.email,this.addForm=!0},openConfirmArchiveDialog:function(){console.log(this.currentProfile.id),!this.currentProfile.active&&!this.all||this.currentProfile.active&&this.all?(this.currentProfile.active=!1,this.confirmArchiveDialog=!0):this.editProfile()},cancelConfirmArchiveDialog:function(){this.currentProfile.active=!0,this.confirmArchiveDialog=!1},openConfirmDeleteDialog:function(t){this.currentProfile=t,this.currentProfile.email=t.auth_user_id.email,this.archive||!this.all?this.confirmDeleteDialog=!0:this.openConfirmArchiveDialog()},openFilters:function(){console.log("open filters"),b()(".content-list__filters").addClass("open"),b()(".content-list__btns").addClass("hidden")},closeFilters:function(){console.log("open filters"),b()(".content-list__filters").removeClass("open"),b()(".content-list__btns").removeClass("hidden")}}},Qt=Kt,Xt=i("2b5d"),Yt=i("23a7"),te=i("8270"),ee=Object(l["a"])(Qt,Zt,Rt,!1,null,"2510ff0e",null),ie=ee.exports;u()(ee,{VBtn:D["a"],VCard:ut["a"],VCardActions:dt["a"],VCardText:dt["b"],VCardTitle:dt["c"],VCheckbox:I["a"],VCombobox:Xt["a"],VDialog:ft["a"],VFileInput:Yt["a"],VIcon:mt["a"],VImg:k["a"],VList:ht["a"],VListItem:vt["a"],VListItemAction:Mt["a"],VListItemAvatar:te["a"],VListItemContent:pt["a"],VListItemIcon:_t["a"],VListItemSubtitle:pt["b"],VListItemTitle:pt["c"],VSelect:St["a"],VSpacer:gt["a"],VTextField:M["a"],VToolbar:bt["a"]}),a["a"].use(v["a"]);var ae=[{path:"/",name:"Home",component:V},{path:"/login",name:"Login",component:E},{path:"/recover",name:"RecoverPassword",component:B},{path:"/news",name:"News",component:wt},{path:"/objects",name:"Objects",component:Bt},{path:"/workers",name:"Workers",component:ie}],ne=new v["a"]({routes:ae}),oe=ne,se=i("f309"),re=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M32.1563 26.8481L26.467 23.1502L28.6119 19.2178C29.1119 18.2995 29.3742 17.2707 29.375 16.2251V10C29.375 7.67936 28.4531 5.45376 26.8122 3.81282C25.1712 2.17187 22.9456 1.25 20.625 1.25C18.3044 1.25 16.0788 2.17187 14.4378 3.81282C12.7969 5.45376 11.875 7.67936 11.875 10V16.2251C11.8758 17.2707 12.1381 18.2996 12.6381 19.2179L14.7831 23.1502L9.09376 26.8481C8.21939 27.4142 7.50093 28.1904 7.00413 29.1059C6.50733 30.0214 6.24805 31.0468 6.25001 32.0884V38.75H35V32.0884C35.002 31.0469 34.7427 30.0214 34.2459 29.1059C33.7491 28.1904 33.0306 27.4142 32.1563 26.8481ZM32.5 36.25H8.75001V32.0884C8.74884 31.4635 8.90442 30.8482 9.20252 30.2989C9.50061 29.7496 9.9317 29.2838 10.4563 28.9442L18.086 23.9849L14.8329 18.0208C14.5329 17.4698 14.3755 16.8525 14.375 16.2251V10C14.375 8.3424 15.0335 6.75269 16.2056 5.58058C17.3777 4.40848 18.9674 3.75 20.625 3.75C22.2826 3.75 23.8723 4.40848 25.0444 5.58058C26.2165 6.75269 26.875 8.3424 26.875 10V16.2251C26.8745 16.8525 26.7171 17.4698 26.4171 18.0208L23.1641 23.9849L30.7939 28.9442C31.3185 29.2839 31.7495 29.7496 32.0476 30.2989C32.3457 30.8482 32.5012 31.4635 32.5 32.0884V36.25Z",fill:"#333333"}})])},le=[],ce={name:"loginIcon"},ue=ce,de=Object(l["a"])(ue,re,le,!1,null,"3fd92f9f",null),fe=de.exports,me=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M30 15.625V11.25C30 8.59784 28.9464 6.0543 27.0711 4.17893C25.1957 2.30357 22.6522 1.25 20 1.25C17.3478 1.25 14.8043 2.30357 12.9289 4.17893C11.0536 6.0543 10 8.59784 10 11.25V15.625H6.875V25.625C6.875 32.8621 12.7628 38.75 20 38.75C27.2372 38.75 33.125 32.8621 33.125 25.625V15.625H30ZM12.5 11.25C12.5 9.26088 13.2902 7.35322 14.6967 5.9467C16.1032 4.54018 18.0109 3.75 20 3.75C21.9891 3.75 23.8968 4.54018 25.3033 5.9467C26.7098 7.35322 27.5 9.26088 27.5 11.25V15.625H12.5V11.25ZM30.625 25.625C30.625 31.4836 25.8586 36.25 20 36.25C14.1414 36.25 9.375 31.4836 9.375 25.625V18.125H30.625V25.625Z",fill:"#333333"}})])},he=[],ve={name:"passwordIcon"},pe=ve,_e=Object(l["a"])(pe,me,he,!1,null,"3d899d96",null),ge=_e.exports,be=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M19 1L1 19M1 1L19 19",stroke:"#616161","stroke-linecap":"round"}})])},Ce=[],we={name:"deleteIcon"},xe=we,ke=Object(l["a"])(xe,be,Ce,!1,null,"66f72e37",null),je=ke.exports,Ve=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{width:"74",height:"74",viewBox:"0 0 74 74",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M37 1V73M73 37L1 37",stroke:"#616161","stroke-width":"2","stroke-linecap":"round"}})])},Oe=[],Pe={name:"addNewIcon"},ye=Pe,$e=Object(l["a"])(ye,Ve,Oe,!1,null,"432a762a",null),De=$e.exports,Ie=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("svg",{attrs:{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M27.1325 6.61375L23.3838 2.86625C23.2679 2.74995 23.1301 2.65771 22.9785 2.59486C22.8268 2.532 22.6642 2.49976 22.5 2.5H7.5C7.33582 2.49976 7.17322 2.532 7.02155 2.59486C6.86988 2.65771 6.73214 2.74995 6.61625 2.86625L2.8675 6.61375C2.75071 6.72959 2.65809 6.86748 2.595 7.0194C2.53192 7.17132 2.49963 7.33425 2.5 7.49875V23.75C2.5 25.1287 3.62125 26.25 5 26.25H25C26.3788 26.25 27.5 25.1287 27.5 23.75V7.49875C27.5004 7.33425 27.4681 7.17132 27.405 7.0194C27.3419 6.86748 27.2493 6.72959 27.1325 6.61375ZM8.0175 5H21.9825L23.2313 6.24875H6.76875L8.0175 5ZM5 23.75V8.74875H25L25.0025 23.75H5Z",fill:"#616161"}}),i("path",{attrs:{d:"M18.75 15H11.25V12.5H8.75V17.5H21.25V12.5H18.75V15Z",fill:"#616161"}})])},Le=[],Me={name:"archiveIcon"},Fe=Me,Ee=Object(l["a"])(Fe,Ie,Le,!1,null,"1fd8871a",null),Te=Ee.exports;a["a"].use(se["a"]);var Se=new se["a"]({theme:{themes:{options:{customProperties:!0},light:{primary:"#3D6FB6",secondary:"#6386B9",accent:"#673ab7",alert:"#f44336",error:"#f44336",warning:"#ff9800",info:"#3D6FB6",success:"#3D6FB6",text:{primary:"#333333",secondary:"#616161"}}}},icons:{values:{addNew:{component:De},addPhoto:{component:$t},archive:{component:Te},deleteIcon:{component:je},edit:{component:et},login:{component:fe},password:{component:ge},pdf:{component:Jt},waste:{component:J}}}}),Ae=i("2004"),Ne=i.n(Ae);a["a"].config.productionTip=!1,new a["a"]({router:oe,vuetify:Se,render:function(t){return t(h)}}).$mount("#app"),a["a"].use(Ne.a,{name:"v-editor",editorConfig:{uploadImgUrl:"/api/upload",printLog:!1,useLang:"en"},uploadHandler:function(t,e){if("success"===t){var i=JSON.parse(e);return 1!==i.status?null:i.data}return"upload failed__"}})},"85ec":function(t,e,i){},fb62:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"menu"},[a("div",{staticClass:"menu-burger",on:{click:t.showMobileMenu}},[a("div",{staticClass:"menu-burger__item"}),a("div",{staticClass:"menu-burger__item"}),a("div",{staticClass:"menu-burger__item"})]),a("div",{staticClass:"menu__profile",on:{click:function(e){return t.goPage(0)}}},[null!=t.user.photo_path?a("v-img",{attrs:{"lazy-src":i("5469")("./media"+t.user.photo_path),src:i("5469")("./media"+t.user.photo_path)}}):t._e()],1),a("v-list",{staticClass:"menu-list",attrs:{dense:"",nav:"",color:"primary"}},[a("h2",[t._v("Главная")]),a("v-list-item-group",{model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},[a("v-list-item",{on:{click:function(e){return t.goPage(0)}}},[a("v-list-item-content",[a("v-list-item-title",[t._v("Профиль")])],1)],1),a("v-list-item",{on:{click:function(e){return t.goPage(1)}}},[a("v-list-item-content",[a("v-list-item-title",[t._v("Новости")])],1)],1),a("v-spacer"),t._l(t.items,(function(e,i){return a("v-list-item",{key:i,on:{click:function(e){return t.goPage(i+2)}}},[a("v-list-item-content",[a("v-list-item-title",{domProps:{textContent:t._s(e.text)}})],1)],1)})),a("v-spacer"),a("v-list-item",{on:{click:function(e){return t.goPage(2+t.items.length)}}},[a("v-list-item-content",[a("v-list-item-title",[t._v("Настройки")])],1)],1),a("v-list-item",{on:{click:function(e){return t.goPage(2+t.items.length+1)}}},[a("v-list-item-content",[a("v-list-item-title",[t._v("Выход")])],1)],1)],2)],1)],1)},n=[],o=(i("b0c0"),i("159b"),i("1157")),s=i.n(o),r={name:"Menu",created:function(){var t=this;switch(s()(window).width()<="568"&&this.loadUser(),this.$router.getMatchedComponents()[0].name){case"Home":this.selectedItem=0,this.page="Главная";break;case"News":this.selectedItem=1,this.page="Новости";break;case"Settings":this.selectedItem=this.items.length+1,this.page="Настройки";break;default:var e=-1;this.items.forEach((function(i){e++,i.name===t.$router.getMatchedComponents()[0].name&&(t.page=i.text,t.selectedItem=e+2)})),console.log(this.selectedItem),console.log(this.page)}},data:function(){return{user:{},selectedItem:0,items:[{text:"Объекты",name:"Objects"},{text:"Работники",name:"Workers"}],page:""}},methods:{goPage:function(t){switch(s()(".menu").hasClass("open")&&s()(".menu").removeClass("open"),t){case 0:this.$router.push({name:"Home"}),this.selectedItem=0;break;case 1:this.$router.push({name:"News"});break;case this.items.length+2:break;case this.items.length+3:this.logout();break;default:this.$router.push({name:this.items[t-2].name});break}},logout:function(){var t=this;s.a.ajax({url:this.$hostname+"auth/token/logout/",type:"POST",success:function(){localStorage.clear(),sessionStorage.clear(),window.location="/"},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}})},showMobileMenu:function(){console.log("open menu"),s()(".menu").hasClass("open")?s()(".menu").removeClass("open"):s()(".menu").addClass("open")},loadUser:function(){var t=this;localStorage.getItem("auth_token")?s.a.ajaxSetup({headers:{Authorization:"Token "+localStorage.getItem("auth_token")}}):sessionStorage.getItem("auth_token")&&s.a.ajaxSetup({headers:{Authorization:"Token "+sessionStorage.getItem("auth_token")}}),s.a.ajax({url:this.$hostname+"time-tracking/user",type:"GET",success:function(e){t.user=e.data.data,console.log(t.user.photo_path)},error:function(t){500===t.status?console.log("Ошибка соединения с сервером"):console.log("Непредвиденная ошибка")}})}}},l=r,c=i("2877"),u=i("6544"),d=i.n(u),f=i("adda"),m=i("8860"),h=i("da13"),v=i("5d23"),p=i("1baa"),_=i("2fa4"),g=Object(c["a"])(l,a,n,!1,null,"15703994",null);e["a"]=g.exports;d()(g,{VImg:f["a"],VList:m["a"],VListItem:h["a"],VListItemContent:v["a"],VListItemGroup:p["a"],VListItemTitle:v["c"],VSpacer:_["a"]})}});
//# sourceMappingURL=app.js.map