(function(e){function t(t){for(var n,s,r=t[0],l=t[1],c=t[2],u=0,f=[];u<r.length;u++)s=r[u],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&f.push(a[s][0]),a[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(f.length)f.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],n=!0,r=1;r<i.length;r++){var l=i[r];0!==a[l]&&(n=!1)}n&&(o.splice(t--,1),e=s(s.s=i[0]))}return e}var n={},a={app:0},o=[];function s(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=n,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(i,n,function(t){return e[t]}.bind(null,n));return i},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/static/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var c=0;c<r.length;c++)t(r[c]);var d=l;o.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";i("85ec")},"0b79":function(e,t,i){e.exports=i.p+"img/A3DPhhAL6Zg.png"},1577:function(e,t,i){e.exports=i.p+"img/user1.png"},"199c":function(e,t,i){"use strict";(function(e){var n=i("1157"),a=i.n(n),o=i("2b0e"),s=i("fb62");e.jQuery=e.$=a.a,e.appUrl="https://shielded-plateau-96200.herokuapp.com/",o["a"].prototype.$hostname="https://shielded-plateau-96200.herokuapp.com/",o["a"].prototype.$admin=!1,t["a"]={name:"App",components:{Menu:s["a"]},created:function(){(localStorage.getItem("auth_token")||sessionStorage.getItem("auth_token"))&&(this.auth=!0)},data:function(){return{auth:!1}},methods:{setAuth:function(){this.auth=!0},setAdmin:function(){o["a"].prototype.$admin=!0}}}}).call(this,i("c8ba"))},5469:function(e,t,i){var n={"./media/news/159708450387.jpg":"f601","./media/news/99px_ru_wallpaper_170600_vetochka_lavandi_lejit_na_raskritoj_knige.jpg":"dd63","./media/objects/A3DPhhAL6Zg.png":"0b79","./media/users/user1.png":"1577"};function a(e){var t=o(e);return i(t)}function o(e){if(!i.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id="5469"},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-app",[i("v-container",[i("div",{staticClass:"flex-main"},[e.auth?i("Menu",{staticClass:"flex-sidebar"}):e._e(),i("router-view",{on:{"set-auth":e.setAuth,"set-admin":e.setAdmin}})],1)])],1)},o=[],s=i("199c"),r=s["a"],l=(i("034f"),i("2877")),c=i("6544"),d=i.n(c),u=i("7496"),f=i("a523"),_=Object(l["a"])(r,a,o,!1,null,null,null),p=_.exports;d()(_,{VApp:u["a"],VContainer:f["a"]});var v=i("8c4f"),h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"index flex-content"},[e.auth?e._e():i("v-btn",{staticClass:"action-btn",attrs:{color:"primary"},on:{click:e.goLogin}},[e._v("Войти")])],1)},m=[],b={name:"Index",created:function(){(localStorage.getItem("auth_token")||sessionStorage.getItem("auth_token"))&&(this.auth=!0)},data:function(){return{auth:!1}},methods:{goLogin:function(){this.$router.push({name:"Login"})}}},w=b,g=i("8336"),k=Object(l["a"])(w,h,m,!1,null,"bd47f1d4",null),x=k.exports;d()(k,{VBtn:g["a"]});var C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"profile flex-content"},[n("div",{staticClass:"summary-box"},[n("div",{staticClass:"profile__image"},[null!=e.user.photo_path?n("v-img",{attrs:{"lazy-src":i("5469")("./media"+e.user.photo_path),src:i("5469")("./media"+e.user.photo_path)}}):e._e()],1),n("div",{staticClass:"profile__info"},[n("h3",[e._v("Личная информация")]),n("ul",[n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Имя")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.name))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Фамилия")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.lastname))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Дата рождения")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.birthdate))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Гражданство")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.citizenship))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Должность")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.position))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Номер соц. страхования")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.social_code_own))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Финский номер соц. страхования")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.social_code_fin))])])]),n("h3",[e._v("Контакты")]),n("ul",[n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Телефон")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.phone))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Телефон в Финляндии")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.phone_fin))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("E-mail")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.auth_user_id.email))])])]),n("h3",[e._v("Банковская информация")]),n("ul",[n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Налоговый номер")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.tax_number))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Счет в банке")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.bank_account))])])]),n("div",{staticClass:"open__actions"},[n("div",{staticClass:"addition-btn",on:{click:function(t){e.full=!e.full}}},[e.full?n("span",[e._v("Скрыть полную информацию")]):e._e(),e.full?e._e():n("span",[e._v("Показать полную информацию")])])]),e.full?n("div",{staticClass:"profile__info profile__info-full"},[n("h3",[e._v("Адреса")]),n("ul",[n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Адрес в своей стране")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.address_own))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Адрес в Финляндии")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.address_fin))])])]),n("h3",[e._v("Одежда (размеры)")]),n("ul",[n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Ботинки")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.boots))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Куртка")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.jacket))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Штаны")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.pants))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Футболка")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.shirt))])])]),n("h3",[e._v("Языки")]),n("ul",[n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Русский")]),n("v-checkbox",{staticClass:"profile__info-content",attrs:{disabled:""},model:{value:e.user.russian,callback:function(t){e.$set(e.user,"russian",t)},expression:"user.russian"}})],1),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Английский")]),n("v-checkbox",{staticClass:"profile__info-content",attrs:{disabled:""},model:{value:e.user.english,callback:function(t){e.$set(e.user,"english",t)},expression:"user.english"}})],1),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Эстонский")]),n("v-checkbox",{staticClass:"profile__info-content",attrs:{disabled:""},model:{value:e.user.estonian,callback:function(t){e.$set(e.user,"estonian",t)},expression:"user.estonian"}})],1),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Финский")]),n("v-checkbox",{staticClass:"profile__info-content",attrs:{disabled:""},model:{value:e.user.finnish,callback:function(t){e.$set(e.user,"finnish",t)},expression:"user.finnish"}})],1),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Другие")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.other_language))])])]),n("h3",[e._v("Другое")]),n("ul",[n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Свой автомобиль")]),n("v-checkbox",{staticClass:"profile__info-content",attrs:{disabled:""},model:{value:e.user.auto,callback:function(t){e.$set(e.user,"auto",t)},expression:"user.auto"}})],1),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Свой инструмент")]),n("v-checkbox",{staticClass:"profile__info-content",attrs:{disabled:""},model:{value:e.user.tool,callback:function(t){e.$set(e.user,"tool",t)},expression:"user.tool"}})],1),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Навыки")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.user.skills))])])])]):e._e()])]),n("v-alert",{attrs:{"close-text":"Закрыть",color:"error",dismissible:""},model:{value:e.alertError,callback:function(t){e.alertError=t},expression:"alertError"}},[e._v(" "+e._s(e.alertMsg)+" ")])],1)},P=[],j=i("1157"),$=i.n(j),O={name:"Home",data:function(){return{page:"home",user:{auth_user_id:{email:""}},groups:[],full:!1,alertError:!1,alertMsg:""}},created:function(){localStorage.getItem("auth_token")?(this.$emit("set-auth"),$.a.ajaxSetup({headers:{Authorization:"Token "+localStorage.getItem("auth_token")}}),this.loadData()):sessionStorage.getItem("auth_token")?(this.$emit("set-auth"),$.a.ajaxSetup({headers:{Authorization:"Token "+sessionStorage.getItem("auth_token")}}),this.loadData()):this.$router.push({name:"Index"})},methods:{loadData:function(){var e=this;$.a.ajax({url:this.$hostname+"time-tracking/user",type:"GET",success:function(t){e.user=t.data.data},error:function(t){console.log(t),500===t.status?e.alertMsg="Ошибка соединения с сервером":e.alertMsg="Непредвиденная ошибка",e.alertError=!0}})}}},y=O,V=i("0798"),D=i("ac7c"),F=i("adda"),I=Object(l["a"])(y,C,P,!1,null,null,null),E=I.exports;d()(I,{VAlert:V["a"],VCheckbox:D["a"],VImg:F["a"]});var L=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login"},[i("div",{staticClass:"logo"},[e._v("logo")]),i("v-form",{ref:"form",staticClass:"mu-demo-form",attrs:{model:e.authForm}},[i("h1",[e._v("Авторизация")]),i("v-text-field",{attrs:{placeholder:"Логин",rules:e.usernameRules,required:"","append-icon":"$login",outlined:""},model:{value:e.authForm.login,callback:function(t){e.$set(e.authForm,"login",t)},expression:"authForm.login"}}),i("v-text-field",{attrs:{placeholder:"Пароль",type:"password",rules:e.passwordRules,required:"","append-icon":"$password",outlined:""},model:{value:e.authForm.password,callback:function(t){e.$set(e.authForm,"password",t)},expression:"authForm.password"}}),i("v-checkbox",{attrs:{label:"Запомнить меня"},model:{value:e.checkbox,callback:function(t){e.checkbox=t},expression:"checkbox"}}),i("v-btn",{attrs:{color:"primary"},on:{click:e.setLogin}},[e._v("Войти")])],1),i("button",{staticClass:"login__recover-btn",on:{click:e.goRecover}},[e._v("Забыли пароль?")]),i("v-alert",{attrs:{"close-text":"Закрыть",color:"error",dismissible:""},model:{value:e.alertError,callback:function(t){e.alertError=t},expression:"alertError"}},[e._v(" "+e._s(e.alertMsg)+" ")]),i("v-alert",{attrs:{"close-text":"Закрыть",color:"success",dismissible:""},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v(" "+e._s(e.alertMsg)+" ")])],1)},M=[],T={name:"Login",data:function(){return{authForm:{login:"",password:""},checkbox:!1,usernameRules:[function(e){return!!e||"Необходимо заполнить имя пользователя"}],passwordRules:[function(e){return!!e||"Необходимо заполнить пароль"}],alertError:!1,alertSuccess:!1,alertMsg:""}},created:function(){(localStorage.getItem("auth_token")||sessionStorage.getItem("auth_token"))&&this.$router.push({name:"Home"})},methods:{setLogin:function(){var e=this;this.$refs.form.validate()&&$.a.ajax({url:this.$hostname+"auth/token/login",type:"POST",data:{email:this.authForm.login,password:this.authForm.password},success:function(t){e.checkbox?localStorage.setItem("auth_token",t.data.attributes.auth_token):sessionStorage.setItem("auth_token",t.data.attributes.auth_token),e.$router.push({name:"Home"})},error:function(t){switch(console.log(t),e.alertError=!0,e.alertMsg="Непредвиденная ошибка",t.status){case 400:e.alertMsg="Пользователя с такой почтой не существует";break;case 403:e.alertMsg="Неверный пароль";break;case 404:e.alertMsg="Страница не найдена";break}}})},goRecover:function(){this.$router.push({name:"RecoverPassword"})}}},S=T,A=i("4bd4"),N=i("8654"),H=Object(l["a"])(S,L,M,!1,null,"6f0a693c",null),R=H.exports;d()(H,{VAlert:V["a"],VBtn:g["a"],VCheckbox:D["a"],VForm:A["a"],VTextField:N["a"]});var W=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login"},[i("div",{staticClass:"logo"},[e._v("logo")]),i("v-form",{ref:"form",staticClass:"mu-demo-form",attrs:{model:e.authForm}},[i("h1",[e._v("Восстановление пароля")]),i("v-text-field",{attrs:{placeholder:"Логин",rules:e.usernameRules,required:"","append-icon":"$login",outlined:""},model:{value:e.authForm.login,callback:function(t){e.$set(e.authForm,"login",t)},expression:"authForm.login"}}),i("v-btn",{attrs:{color:"primary"},on:{click:e.sendMessage}},[e._v("Восстановить пароль")])],1),i("v-alert",{attrs:{"close-text":"Закрыть",color:"error",dismissible:""},model:{value:e.alertError,callback:function(t){e.alertError=t},expression:"alertError"}},[e._v(" "+e._s(e.alertMsg)+" ")]),i("v-alert",{attrs:{"close-text":"Закрыть",color:"success",dismissible:""},model:{value:e.alertSuccess,callback:function(t){e.alertSuccess=t},expression:"alertSuccess"}},[e._v(" "+e._s(e.alertMsg)+" ")])],1)},q=[],B={name:"RecoverPassword",data:function(){return{authForm:{login:""},usernameRules:[function(e){return!!e||"Необходимо заполнить имя пользователя"}],alertError:!1,alertSuccess:!1,alertMsg:""}}},Z=B,z=Object(l["a"])(Z,W,q,!1,null,"9a2018f2",null),U=z.exports;d()(z,{VAlert:V["a"],VBtn:g["a"],VForm:A["a"],VTextField:N["a"]});var G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"news flex-content"},[n("div",{staticClass:"summary-box"},[n("div",{staticClass:"summary-box__title"},[n("h3",[e._v("Новости")]),e.all?e._e():n("div",{staticClass:"addition-btn",on:{click:function(t){e.all=!0}}},[n("span",[e._v("К списку новостей")]),n("back-icon")],1)]),e.all?n("div",{staticClass:"news-all"},[n("div",{staticClass:"news-all__grid"},[e._l(e.news,(function(t){return[t.photo_path?n("v-card",{key:t.id,staticClass:"news-single",style:{"background-image":"url("+i("5469")("./media"+t.photo_path)+")","background-size":"cover","background-position":"center"},attrs:{color:"primary"},on:{click:function(i){return e.openNew(t)}}},[n("div",{staticClass:"news-single__actions"},[n("v-icon",{on:{click:function(i){return e.deleteNew(t.id)}}},[e._v("$waste")]),n("v-icon",{on:{click:function(i){return e.openEditForm(t.id,t.title,t.text)}}},[e._v("$edit")])],1),n("div",{staticClass:"news-single__title"},[e._v(e._s(t.title))]),n("div",{staticClass:"news-single__text",domProps:{innerHTML:e._s(t.text)}})]):n("v-card",{key:t.id,staticClass:"news-single",attrs:{color:"primary"},on:{click:function(i){return e.openNew(t)}}},[n("div",{staticClass:"news-single__actions"},[n("v-icon",{on:{click:function(i){return e.deleteNew(t.id)}}},[e._v("$waste")]),n("v-icon",{on:{click:function(i){return e.openEditForm(t.id,t.title,t.text)}}},[e._v("$edit")])],1),n("div",{staticClass:"news-single__title"},[e._v(e._s(t.title))]),n("div",{staticClass:"news-single__text",domProps:{innerHTML:e._s(t.text)}})])]}))],2),n("v-list",[n("v-list-item",{staticClass:"content-list__btns-add",on:{click:e.openAddForm}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-plus")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Добавить новость")])],1)],1)],1)],1):n("div",{staticClass:"news-open"},[n("h4",[e._v(e._s(e.currentNew.title))]),n("div",{staticClass:"news-open__image"},[e.currentNew.photo_path?n("v-img",{attrs:{src:i("5469")("./media"+e.currentNew.photo_path)}}):e._e()],1),n("div",{staticClass:"news-open__text",domProps:{innerHTML:e._s(e.currentNew.text)}}),n("div",{staticClass:"news-open__actions open__actions"},[n("div",{staticClass:"addition-btn",on:{click:function(t){return e.openEditForm(e.currentNew.id,e.currentNew.title,e.currentNew.text)}}},[n("edit-icon"),e._v(" Редактировать новость ")],1),n("div",{staticClass:"addition-btn",on:{click:function(t){return e.deleteNew(e.currentNew.id)}}},[n("waste-icon"),e._v(" Удалить новость ")],1)])])]),n("v-dialog",{staticClass:"news__dialog",model:{value:e.addForm,callback:function(t){e.addForm=t},expression:"addForm"}},[n("v-card",[n("v-toolbar",{attrs:{flat:""}},[n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:e.closeForm}},[n("v-icon",[e._v("mdi-close")])],1)],1),n("h3",[e._v(e._s(e.formTitle))]),n("v-card-text",[n("v-form",{ref:"form"},[n("v-text-field",{attrs:{placeholder:"Заголовок",rules:e.titleRules,required:"",outlined:""},model:{value:e.newNew.title,callback:function(t){e.$set(e.newNew,"title",t)},expression:"newNew.title"}}),n("v-editor",{attrs:{config:e.editorConfig},model:{value:e.newNew.text,callback:function(t){e.$set(e.newNew,"text",t)},expression:"newNew.text"}})],1),n("v-alert",{attrs:{"close-text":"Закрыть",color:"error",dismissible:""},model:{value:e.alertError,callback:function(t){e.alertError=t},expression:"alertError"}},[e._v(" "+e._s(e.alertMsg)+" ")])],1),n("v-card-actions",[n("div",{staticClass:"addition-btn",on:{click:function(t){e.photoDialog=!0}}},[n("add-photo-icon"),null==e.newNew.photo_path?n("span",[e._v("Загрузить обложку")]):e._e(),null!=e.newNew.photo_path?n("span",[e._v("Сменить обложку")]):e._e()],1),n("v-spacer"),n("v-btn",{staticClass:"action-btn",attrs:{color:"primary"},on:{click:e.addNew}},[e._v(e._s(e.formBtnText))])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"500"},model:{value:e.photoDialog,callback:function(t){e.photoDialog=t},expression:"photoDialog"}},[n("v-card",[n("v-card-title",[e._v(" Сменить фото ")]),n("v-card-text",[n("v-file-input",{attrs:{placeholder:"Обложка новости",accept:"image/*","prepend-icon":"",outlined:""},model:{value:e.newNew.photo_path,callback:function(t){e.$set(e.newNew,"photo_path",t)},expression:"newNew.photo_path"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.closePhotoForm}},[e._v("Сохранить")])],1)],1)],1)],1)},K=[],J=(i("b0c0"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M8 5.6C8 5.17565 8.16857 4.76869 8.46863 4.46863C8.76869 4.16857 9.17565 4 9.6 4H14.4C14.8243 4 15.2313 4.16857 15.5314 4.46863C15.8314 4.76869 16 5.17565 16 5.6V7.2H19.2C19.4122 7.2 19.6157 7.28429 19.7657 7.43431C19.9157 7.58434 20 7.78783 20 8C20 8.21217 19.9157 8.41566 19.7657 8.56569C19.6157 8.71571 19.4122 8.8 19.2 8.8H18.3448L17.6512 18.5136C17.6225 18.9173 17.4418 19.2951 17.1457 19.5709C16.8495 19.8467 16.4599 20 16.0552 20H7.944C7.53931 20 7.14965 19.8467 6.85351 19.5709C6.55736 19.2951 6.37673 18.9173 6.348 18.5136L5.656 8.8H4.8C4.58783 8.8 4.38434 8.71571 4.23431 8.56569C4.08429 8.41566 4 8.21217 4 8C4 7.78783 4.08429 7.58434 4.23431 7.43431C4.38434 7.28429 4.58783 7.2 4.8 7.2H8V5.6ZM9.6 7.2H14.4V5.6H9.6V7.2ZM7.2592 8.8L7.9448 18.4H16.056L16.7416 8.8H7.2592ZM10.4 10.4C10.6122 10.4 10.8157 10.4843 10.9657 10.6343C11.1157 10.7843 11.2 10.9878 11.2 11.2V16C11.2 16.2122 11.1157 16.4157 10.9657 16.5657C10.8157 16.7157 10.6122 16.8 10.4 16.8C10.1878 16.8 9.98434 16.7157 9.83431 16.5657C9.68429 16.4157 9.6 16.2122 9.6 16V11.2C9.6 10.9878 9.68429 10.7843 9.83431 10.6343C9.98434 10.4843 10.1878 10.4 10.4 10.4ZM13.6 10.4C13.8122 10.4 14.0157 10.4843 14.1657 10.6343C14.3157 10.7843 14.4 10.9878 14.4 11.2V16C14.4 16.2122 14.3157 16.4157 14.1657 16.5657C14.0157 16.7157 13.8122 16.8 13.6 16.8C13.3878 16.8 13.1843 16.7157 13.0343 16.5657C12.8843 16.4157 12.8 16.2122 12.8 16V11.2C12.8 10.9878 12.8843 10.7843 13.0343 10.6343C13.1843 10.4843 13.3878 10.4 13.6 10.4Z",fill:"white"}})])}),Q=[],X={name:"wasteIcon"},Y=X,ee=Object(l["a"])(Y,J,Q,!1,null,"f0835c60",null),te=ee.exports,ie=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{attrs:{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M19.4042 7.29413L16.6642 4.5442C16.3066 4.20708 15.838 4.01365 15.3475 4.0007C14.8571 3.98774 14.379 4.15617 14.0042 4.47395L5.0042 13.5065C4.68097 13.8337 4.47971 14.2625 4.4342 14.7209L4.0042 18.906C3.99073 19.053 4.00974 19.2012 4.05986 19.34C4.10999 19.4788 4.19001 19.6047 4.2942 19.7089C4.38764 19.8019 4.49846 19.8755 4.6203 19.9255C4.74213 19.9754 4.8726 20.0007 5.0042 20H5.0942L9.2642 19.6186C9.721 19.5729 10.1482 19.3709 10.4742 19.0465L19.4742 10.0139C19.8235 9.64357 20.0123 9.14933 19.9992 8.63952C19.9861 8.12971 19.7721 7.64591 19.4042 7.29413ZM9.0842 17.6114L6.0842 17.8924L6.3542 14.8815L12.0042 9.2813L14.7042 11.9911L9.0842 17.6114ZM16.0042 10.6462L13.3242 7.95652L15.2742 5.94928L18.0042 8.68916L16.0042 10.6462Z",fill:"white"}})])},ne=[],ae={name:"editIcon"},oe=ae,se=Object(l["a"])(oe,ie,ne,!1,null,"6fd27fff",null),re=se.exports,le=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{attrs:{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M2.5 13.75L11.25 2.5V8.75C26.1913 8.75 27.915 20.8475 27.5 27.5C26.8725 24.1438 26.5813 18.75 11.25 18.75V25L2.5 13.75Z",stroke:"#616161","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}})])},ce=[],de={name:"backIcon"},ue=de,fe=Object(l["a"])(ue,le,ce,!1,null,"76f211ad",null),_e=fe.exports,pe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{attrs:{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M20.2869 16.6843L15.0022 11.3997L9.71753 16.6843L11.0433 18.0101L14.0647 14.9888V29.0625H15.9397V14.9888L18.9611 18.0101L20.2869 16.6843Z",fill:"#616161"}}),i("path",{attrs:{d:"M23.4375 9.46014V9.375C23.4375 4.72266 19.6523 0.9375 15 0.9375C10.3477 0.9375 6.5625 4.72266 6.5625 9.375V9.52096C5.1739 9.78301 3.89379 10.4498 2.88316 11.4375C2.26815 12.0344 1.77908 12.7486 1.44489 13.5378C1.11069 14.3271 0.938164 15.1753 0.9375 16.0324C0.9375 17.8557 1.6868 19.5926 3.04746 20.9231C4.37695 22.2231 6.17215 22.9688 7.97285 22.9688H11.7188V21.0938H7.97285C5.22387 21.0938 2.8125 18.7286 2.8125 16.0324C2.8125 13.5557 4.90078 11.467 7.56662 11.2772L8.4375 11.2151V9.375C8.4375 7.63452 9.1289 5.96532 10.3596 4.73461C11.5903 3.5039 13.2595 2.8125 15 2.8125C16.7405 2.8125 18.4097 3.5039 19.6404 4.73461C20.8711 5.96532 21.5625 7.63452 21.5625 9.375V11.2523L22.4883 11.2641C25.2112 11.2985 27.1875 13.3039 27.1875 16.0324C27.1875 18.8705 25.0984 21.0938 22.4314 21.0938H18.2812V22.9688H22.4314C23.3247 22.9717 24.2088 22.7885 25.0274 22.4308C25.846 22.0731 26.581 21.5489 27.1857 20.8914C28.396 19.5902 29.0625 17.8646 29.0625 16.0324C29.0625 12.6083 26.7021 9.92531 23.4375 9.46014Z",fill:"#616161"}})])},ve=[],he={name:"addPhotoIcon"},me=he,be=Object(l["a"])(me,pe,ve,!1,null,"e50887ec",null),we=be.exports,ge={name:"News",components:{BackIcon:_e,EditIcon:re,WasteIcon:te,AddPhotoIcon:we},data:function(){return{page:"news",all:!0,news:"",newNew:{id:0,title:"",text:"",photo_path:null},currentNew:{id:0,title:"",text:"",photo_path:null},titleRules:[function(e){return!!e||"Необходимо ввести заголовок"}],formTitle:"Добавление новости",formBtnText:"Добавить новость",addForm:!1,photoDialog:!1,alertError:!1,alertSuccess:!1,alertMsg:"",options:{},editorConfig:{printLog:!1,uploadImgUrl:"http://localhost:2233/api/upload",menus:["source","|","bold","underline","italic","strikethrough","eraser","forecolor","bgcolor","|","quote","fontfamily","fontsize","head","unorderlist","orderlist","alignleft","aligncenter","alignright","|","link","unlink","table","|","img","video","insertcode","|","undo","redo","fullscreen"],useLang:"en",pasteText:!0},disableEditor:{printLog:!1,disable:!0}}},created:function(){localStorage.getItem("auth_token")?(this.$emit("set-auth"),$.a.ajaxSetup({headers:{Authorization:"Token "+localStorage.getItem("auth_token")}}),this.loadData()):sessionStorage.getItem("auth_token")?(this.$emit("set-auth"),$.a.ajaxSetup({headers:{Authorization:"Token "+sessionStorage.getItem("auth_token")}}),this.loadData()):this.$router.push({name:"Login"})},methods:{onChange:function(){console.log(this.newNew.text.text())},uploadCallback:function(e){console.log("uploaded url",e)},loadData:function(){var e=this;$.a.ajax({url:this.$hostname+"time-tracking/news",type:"GET",success:function(t){e.news=t.data.data},error:function(t){e.alertError=!0,e.alertMsg="Непредвиденная ошибка",console.log(t.data)}})},addNew:function(){var e=this;if(this.$refs.form.validate())if(console.log(this.newNew.id+" "+this.newNew.title),console.log(this.newNew.text),this.newNew.id>0)this.editNew();else{var t=i("bc3a"),n=new FormData,a=this.newNew.photo_path;if(void 0===this.newNew.photo_path)return void console.log("ERROR");n.append("image",a),n.append("title",this.newNew.title),n.append("text",this.newNew.text),t({method:"post",url:this.$hostname+"time-tracking/news",headers:{Authorization:"Token "+(sessionStorage.getItem("auth_token")||localStorage.getItem("auth_token"))},data:n}).then((function(t){console.log(t.data.data),e.photoDialog=!1,e.closeForm(),e.loadData()}))}else this.alertError=!0,this.alertMsg="Заполните обязательные поля"},editNew:function(){var e=this,t=i("bc3a"),n=new FormData,a=this.newNew.photo_path;null!==this.newNew.photo_path?(n.append("image",a),n.append("title",this.newNew.title),n.append("text",this.newNew.text),n.append("id",this.newNew.id),t({method:"put",url:this.$hostname+"time-tracking/news",headers:{Authorization:"Token "+(sessionStorage.getItem("auth_token")||localStorage.getItem("auth_token"))},data:n}).then((function(t){console.log(t.data.data),e.photoDialog=!1,e.closeForm(),e.loadData()}))):console.log("ERROR")},deleteNew:function(e){var t=this;$.a.ajax({url:this.$hostname+"time-tracking/news",type:"DELETE",data:{id:e},success:function(){t.alertMsg="Новость удалена",t.loadData(),t.all=!0},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}})},openAddForm:function(){this.formTitle="Добавление новости",this.formBtnText="Добавить новость",this.addForm=!0},openEditForm:function(e,t,i){this.formTitle="Редактирование новости",this.formBtnText="Сохранить новость",this.newNew={id:e,title:t,text:i},this.addForm=!0},closeForm:function(){this.addForm=!1,this.newNew={id:0,title:"",text:"",photo:null}},closePhotoForm:function(){null!==this.newNew.photo_path&&(this.currentNew.photo_path="/news/"+this.newNew.photo_path.name),this.photoDialog=!1},openNew:function(e){this.currentNew=e,this.all=!1}}},ke=ge,xe=i("b0af"),Ce=i("99d9"),Pe=i("169a"),je=i("23a7"),$e=i("132d"),Oe=i("8860"),ye=i("da13"),Ve=i("5d23"),De=i("34c3"),Fe=i("2fa4"),Ie=i("71d9"),Ee=Object(l["a"])(ke,G,K,!1,null,"b7ae4976",null),Le=Ee.exports;d()(Ee,{VAlert:V["a"],VBtn:g["a"],VCard:xe["a"],VCardActions:Ce["a"],VCardText:Ce["b"],VCardTitle:Ce["c"],VDialog:Pe["a"],VFileInput:je["a"],VForm:A["a"],VIcon:$e["a"],VImg:F["a"],VList:Oe["a"],VListItem:ye["a"],VListItemContent:Ve["a"],VListItemIcon:De["a"],VListItemTitle:Ve["c"],VSpacer:Fe["a"],VTextField:N["a"],VToolbar:Ie["a"]});var Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"objects flex-content"},[n("div",{staticClass:"summary-box"},[n("div",{staticClass:"summary-box__title"},[n("h3",[e._v("Объекты")]),e.all?e._e():n("div",{staticClass:"addition-btn",on:{click:function(t){e.all=!0}}},[n("span",[e._v("К списку объектов")]),n("back-icon")],1),e.all?n("div",{staticClass:" addition-btn content-list__filters-mobile",on:{click:e.openFilters}},[e._v("Фильтры ")]):e._e()]),e.all?n("div",{staticClass:"objects-all"},[n("div",{staticClass:"content-list__filters"},[n("v-icon",{attrs:{color:"grey lighten-1"},on:{click:e.closeFilters}},[e._v(" $deleteIcon ")]),n("v-text-field",{attrs:{placeholder:"Адрес",outlined:""},model:{value:e.filter.address,callback:function(t){e.$set(e.filter,"address",t)},expression:"filter.address"}}),n("v-select",{attrs:{items:e.selects,outlined:""},model:{value:e.filter.client,callback:function(t){e.$set(e.filter,"client",t)},expression:"filter.client"}}),n("v-menu",{ref:"menu_filter",attrs:{"close-on-content-click":!1,"return-value":e.filter.dates,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.filter,"dates",t)},"update:return-value":function(t){return e.$set(e.filter,"dates",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,a=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{placeholder:"Начало работ",readonly:"",outlined:""},model:{value:e.filter.dates,callback:function(t){e.$set(e.filter,"dates",t)},expression:"filter.dates"}},"v-text-field",a,!1),i))]}}],null,!1,240686409),model:{value:e.datePickers.menu_filter,callback:function(t){e.$set(e.datePickers,"menu_filter",t)},expression:"datePickers.menu_filter"}},[n("v-date-picker",{attrs:{"no-title":"",scrollable:"",range:"",color:"primary"},model:{value:e.filter.dates,callback:function(t){e.$set(e.filter,"dates",t)},expression:"filter.dates"}},[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.datePickers.menu_filter=!1}}},[e._v(" Cancel")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu_filter.save(e.filter.dates)}}},[e._v("OK")])],1)],1)],1),n("v-list",{staticClass:"objects__list content-list",attrs:{"three-line":""}},[e._l(e.objects,(function(t){return[t.active===e.archive&&(t.city+" "+t.street+" "+t.house).includes(e.filter.address)&&("Все"===e.filter.client||t.client_id.name===e.filter.client)&&("undefined"===typeof e.filter.dates[0]||t.date_start>=e.filter.dates[0])&&(t.date_start<=e.filter.dates[1]||"undefined"===typeof e.filter.dates[1])?n("v-list-item",{key:t.id},[n("v-list-item-content",{on:{click:function(i){return e.openObject(t)}}},[n("v-list-item-title",[e._v(e._s(t.city)+" "+e._s(t.street)+" "+e._s(t.house))]),n("v-list-item-subtitle",[n("span",[e._v(e._s(t.date_start)+" - "+e._s(t.date_end))]),n("br"),n("span",[e._v(e._s(t.client_id.name))])])],1),n("v-list-item-action",[n("v-icon",{attrs:{color:"grey lighten-1"},on:{click:function(i){return e.openConfirmDeleteDialog(t)}}},[e._v("$deleteIcon")])],1)],1):e._e()]}))],2),n("v-list",{staticClass:"content-list__btns"},[e.archive?e._e():n("v-list-item",{staticClass:"content-list__btns-add",on:{click:e.openAddForm}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-plus")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Добавить объект")])],1)],1),e.archive?n("v-list-item",{staticClass:"content-list__btns-add",on:{click:function(t){e.archive=!e.archive}}},[n("v-list-item-icon",[n("v-icon",[e._v("$archive")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Выйти из архива")])],1)],1):n("v-list-item",{staticClass:"content-list__btns-add",on:{click:function(t){e.archive=!e.archive}}},[n("v-list-item-icon",[n("v-icon",[e._v("$archive")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Архив")])],1)],1)],1)],1):n("div",{staticClass:"objects-open"},[n("div",{staticClass:"objects-open__info profile__info"},[n("h3",[e._v("Информация об объекте")]),n("div",{staticClass:"news-open__actions open__actions"},[n("div",{staticClass:"addition-btn",on:{click:function(t){return e.openEditForm(e.currentObject)}}},[n("edit-icon"),e._v(" Редактировать объект ")],1),n("div",{staticClass:"addition-btn",on:{click:function(t){return e.deleteObject(e.currentObject.id)}}},[n("waste-icon"),e._v(" Удалить объект ")],1)]),n("ul",[n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Объект сдан")]),n("v-checkbox",{on:{change:e.openConfirmArchiveDialog},model:{value:e.currentObject.active,callback:function(t){e.$set(e.currentObject,"active",t)},expression:"currentObject.active"}})],1),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Клиент")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentObject.client_id.name))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Начало работ")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentObject.date_start))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Окончание работ")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentObject.date_end))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Описание работ")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentObject.work_description))])])]),n("h3",[e._v("Адрес")]),n("ul",[n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Улица")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentObject.street))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Дом")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentObject.house))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Подъезд")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentObject.entrance))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Квартира")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentObject.flat))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Город")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentObject.city))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Индекс")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentObject.index))])])]),n("h3",[e._v("Контактное лицо")]),n("ul",[n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Фамилия")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentObject.contact_id.lastname))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Имя")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentObject.contact_id.name))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Телефон")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentObject.contact_id.work_phone))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("E-mail")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentObject.contact_id.work_email))])])]),n("h3",[e._v("Дополнительная информация")]),n("ul",[n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Жилье")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentObject.habitation))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Страховка от несчастных случаев")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentObject.accident_insurance))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Страховка здоровья")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentObject.health_insurance))])])]),n("h3",[e._v("Работники")]),n("v-list",{staticClass:"workers__list content-list",attrs:{"three-line":""}},[e._l(e.objectWorkers,(function(t){return[n("v-list-item",{key:t.id},[n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.name)+" "+e._s(t.lastname))]),n("v-list-item-subtitle",[n("span",[e._v(e._s(t.position))]),n("br"),n("span",[e._v(e._s(t.auth_user_id.email))])])],1),n("v-list-item-action",[n("v-icon",{attrs:{color:"grey lighten-1"},on:{click:function(i){return e.openConfirmDeleteDialog(t)}}},[e._v(" $deleteIcon ")])],1)],1)]}))],2),n("v-list",{staticClass:"content-list__btns"},[n("v-list-item",{staticClass:"content-list__btns-add",on:{click:function(t){e.addWorkerForm=!0}}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-plus")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Добавить работника")])],1)],1)],1),n("h3",[e._v("Фото объекта")]),n("v-slide-group",{staticClass:"pa-4 objects-open__slider",attrs:{"active-class":"slide-active","show-arrows":""},model:{value:e.photos,callback:function(t){e.photos=t},expression:"photos"}},e._l(e.photos,(function(e){return n("v-slide-item",{key:e.id},[n("v-card",{staticClass:"ma-4",attrs:{height:"250",width:"300"}},[n("v-row",{staticClass:"fill-height",attrs:{align:"center",justify:"center"}},[n("v-scale-transition",[n("v-img",{attrs:{src:i("5469")("./media"+e.photo_path)}})],1)],1)],1)],1)})),1)],1)])]),n("v-dialog",{model:{value:e.addForm,callback:function(t){e.addForm=t},expression:"addForm"}},[n("v-card",[n("v-toolbar",{attrs:{flat:""}},[n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:e.closeForm}},[n("v-icon",[e._v("mdi-close")])],1)],1),n("h3",[e._v(e._s(e.formTitle))]),n("v-card-text",[n("v-form",{ref:"form"},[n("v-text-field",{attrs:{placeholder:"Индекс*",rules:e.reqRules,required:"",outlined:""},model:{value:e.newObject.index,callback:function(t){e.$set(e.newObject,"index",t)},expression:"newObject.index"}}),n("v-row",[n("v-text-field",{attrs:{placeholder:"Город*",rules:e.reqRules,required:"",outlined:""},model:{value:e.newObject.city,callback:function(t){e.$set(e.newObject,"city",t)},expression:"newObject.city"}}),n("v-text-field",{attrs:{placeholder:"Улица*",rules:e.reqRules,required:"",outlined:""},model:{value:e.newObject.street,callback:function(t){e.$set(e.newObject,"street",t)},expression:"newObject.street"}})],1),n("v-row",[n("v-text-field",{attrs:{placeholder:"Дом*",rules:e.reqRules,required:"",outlined:""},model:{value:e.newObject.house,callback:function(t){e.$set(e.newObject,"house",t)},expression:"newObject.house"}}),n("v-text-field",{attrs:{placeholder:"Подъезд",outlined:""},model:{value:e.newObject.entrance,callback:function(t){e.$set(e.newObject,"entrance",t)},expression:"newObject.entrance"}}),n("v-text-field",{attrs:{placeholder:"Квартира",outlined:""},model:{value:e.newObject.flat,callback:function(t){e.$set(e.newObject,"flat",t)},expression:"newObject.flat"}})],1),n("v-row",[n("v-menu",{ref:"menu_start",attrs:{"close-on-content-click":!1,"return-value":e.newObject.date_start,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.newObject,"date_start",t)},"update:return-value":function(t){return e.$set(e.newObject,"date_start",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,a=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{placeholder:"Начало работ*",readonly:"",outlined:"",rules:e.reqRules},model:{value:e.newObject.date_start,callback:function(t){e.$set(e.newObject,"date_start",t)},expression:"newObject.date_start"}},"v-text-field",a,!1),i))]}}]),model:{value:e.datePickers.menu_start,callback:function(t){e.$set(e.datePickers,"menu_start",t)},expression:"datePickers.menu_start"}},[n("v-date-picker",{attrs:{"no-title":"",scrollable:"",color:"primary"},model:{value:e.newObject.date_start,callback:function(t){e.$set(e.newObject,"date_start",t)},expression:"newObject.date_start"}},[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.datePickers.menu_start=!1}}},[e._v(" Cancel")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu_start.save(e.newObject.date_start)}}},[e._v("OK")])],1)],1),n("v-menu",{ref:"menu_end",attrs:{"close-on-content-click":!1,"return-value":e.newObject.date_end,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.newObject,"date_end",t)},"update:return-value":function(t){return e.$set(e.newObject,"date_end",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,a=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{placeholder:"Окончание работ",readonly:"",outlined:"",rules:e.reqRules},model:{value:e.newObject.date_end,callback:function(t){e.$set(e.newObject,"date_end",t)},expression:"newObject.date_end"}},"v-text-field",a,!1),i))]}}]),model:{value:e.datePickers.menu_end,callback:function(t){e.$set(e.datePickers,"menu_end",t)},expression:"datePickers.menu_end"}},[n("v-date-picker",{attrs:{"no-title":"",scrollable:"",color:"primary"},model:{value:e.newObject.date_end,callback:function(t){e.$set(e.newObject,"date_end",t)},expression:"newObject.date_end"}},[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.datePickers.menu_end=!1}}},[e._v(" Cancel")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu_end.save(e.newObject.date_end)}}},[e._v("OK")])],1)],1)],1),n("v-row",[n("v-select",{attrs:{items:e.clients,"item-text":"name","item-value":"id",rules:e.reqRules,placeholder:"Клиент*",outlined:"",dense:""},on:{change:function(t){return e.loadContacts(e.newObject.client_id)}},model:{value:e.newObject.client_id,callback:function(t){e.$set(e.newObject,"client_id",t)},expression:"newObject.client_id"}}),n("v-select",{attrs:{items:e.contacts,"item-value":"id","item-text":"label","no-data-text":"Выберите клиента",placeholder:"Контактное лицо*",rules:e.reqRules,outlined:"",dense:""},model:{value:e.newObject.contact_id,callback:function(t){e.$set(e.newObject,"contact_id",t)},expression:"newObject.contact_id"}})],1),n("v-text-field",{attrs:{placeholder:"Жилье",outlined:""},model:{value:e.newObject.habitation,callback:function(t){e.$set(e.newObject,"habitation",t)},expression:"newObject.habitation"}}),n("v-row",[n("v-text-field",{attrs:{placeholder:"Страховка от несчастных случаев",outlined:""},model:{value:e.newObject.accident_insurance,callback:function(t){e.$set(e.newObject,"accident_insurance",t)},expression:"newObject.accident_insurance"}}),n("v-text-field",{attrs:{placeholder:"Страховка здоровья",outlined:""},model:{value:e.newObject.health_insurance,callback:function(t){e.$set(e.newObject,"health_insurance",t)},expression:"newObject.health_insurance"}})],1),n("v-textarea",{attrs:{placeholder:"Описание работ",outlined:""},model:{value:e.newObject.work_description,callback:function(t){e.$set(e.newObject,"work_description",t)},expression:"newObject.work_description"}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{staticClass:"action-btn",attrs:{color:"primary"},on:{click:e.addObject}},[e._v(e._s(e.formBtnText))])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"500"},model:{value:e.addWorkerForm,callback:function(t){e.addWorkerForm=t},expression:"addWorkerForm"}},[n("v-card",[n("v-toolbar",{attrs:{flat:""}},[n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:e.closeForm}},[n("v-icon",[e._v("mdi-close")])],1)],1),n("h3",[e._v("Добавление работника на объект")]),n("v-card-text",[n("v-form",{ref:"workerForm"},[n("v-select",{attrs:{items:e.workers,"item-value":"id","item-text":"label","no-data-text":"Нет свободных работников",placeholder:"Выберите работника*",rules:e.reqRules,outlined:"",dense:""},model:{value:e.addWorker.user_profile_id,callback:function(t){e.$set(e.addWorker,"user_profile_id",t)},expression:"addWorker.user_profile_id"}}),n("v-row",[n("v-menu",{ref:"worker_start",attrs:{"close-on-content-click":!1,"return-value":e.addWorker.start_date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.addWorker,"start_date",t)},"update:return-value":function(t){return e.$set(e.addWorker,"start_date",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,a=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{placeholder:"Начало работ*",readonly:"",outlined:"",rules:e.reqRules},model:{value:e.addWorker.start_date,callback:function(t){e.$set(e.addWorker,"start_date",t)},expression:"addWorker.start_date"}},"v-text-field",a,!1),i))]}}]),model:{value:e.datePickers.worker_start,callback:function(t){e.$set(e.datePickers,"worker_start",t)},expression:"datePickers.worker_start"}},[n("v-date-picker",{attrs:{"no-title":"",scrollable:"",color:"primary"},model:{value:e.addWorker.start_date,callback:function(t){e.$set(e.addWorker,"start_date",t)},expression:"addWorker.start_date"}},[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.datePickers.worker_start=!1}}},[e._v(" Cancel")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.worker_start.save(e.addWorker.start_date)}}},[e._v("OK")])],1)],1),n("v-menu",{ref:"worker_end",attrs:{"close-on-content-click":!1,"return-value":e.addWorker.end_date,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.addWorker,"end_date",t)},"update:return-value":function(t){return e.$set(e.addWorker,"end_date",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,a=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{placeholder:"Окончание работ",readonly:"",outlined:""},model:{value:e.addWorker.end_date,callback:function(t){e.$set(e.addWorker,"end_date",t)},expression:"addWorker.end_date"}},"v-text-field",a,!1),i))]}}]),model:{value:e.datePickers.worker_end,callback:function(t){e.$set(e.datePickers,"worker_end",t)},expression:"datePickers.worker_end"}},[n("v-date-picker",{attrs:{"no-title":"",scrollable:"",color:"primary"},model:{value:e.addWorker.end_date,callback:function(t){e.$set(e.addWorker,"end_date",t)},expression:"addWorker.end_date"}},[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.datePickers.worker_end=!1}}},[e._v(" Cancel")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.worker_end.save(e.addWorker.end_date)}}},[e._v("OK")])],1)],1)],1),n("v-textarea",{attrs:{placeholder:"Комментарий",outlined:""},model:{value:e.addWorker.comment,callback:function(t){e.$set(e.addWorker,"comment",t)},expression:"addWorker.comment"}})],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{staticClass:"action-btn",attrs:{color:"primary"},on:{click:e.putObjectUser}},[e._v("Сохранить")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"500"},model:{value:e.confirmDeleteDialog,callback:function(t){e.confirmDeleteDialog=t},expression:"confirmDeleteDialog"}},[n("v-card",[n("v-card-title",[e._v(" Удаление объекта ")]),n("v-card-text",[e._v("Вы действительно хотите удалить объект? Отменить это действие будет невозможно")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(t){e.confirmDeleteDialog=!1}}},[e._v("Отменить")]),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.deleteObject}},[e._v("Подтвердить")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"500"},model:{value:e.confirmArchiveDialog,callback:function(t){e.confirmArchiveDialog=t},expression:"confirmArchiveDialog"}},[n("v-card",[n("v-card-title",[e._v(" Сдача объекта ")]),n("v-card-text",[e._v(" Вы действительно хотите сдать объект? После подтверждения объект будет перемещен в архив ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"secondary",text:""},on:{click:e.cancelConfirmArchiveDialog}},[e._v(" Отменить ")]),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.editObject}},[e._v("Подтвердить")])],1)],1)],1)],1)},Te=[],Se=(i("159b"),i("0481"),{name:"Objects",components:{EditIcon:re,WasteIcon:te,BackIcon:_e},data:function(){return{page:"objects",objects:[],objectWorkers:[],all:!0,archive:!1,newObject:{id:0,index:"",city:"",street:"",house:"",entrance:"",flat:"",date_start:"",date_end:"",active:!1,client_id:"",contact_id:"",work_description:null,habitation:null,accident_insurance:null,health_insurance:null},currentObject:{id:0,index:"",city:"",street:"",house:"",entrance:"",flat:"",date_start:"",date_end:"",active:!1,client_id:"",contact_id:"",work_description:null,habitation:null,accident_insurance:null,health_insurance:null},addWorker:{id:0,user_profile_id:0,object_id:0,start_date:null,end_date:null,comment:null},photo:"/objects/A3DPhhAL6Zg.png",photos:"",clients:[],contacts:[],workers:[],selects:["Все",'ООО "Праздник"','ООО "Цветы"'],filter:{address:"",client:"Все",dates:[]},datePickers:{menu_filter:!1,menu_start:!1,menu_end:!1,worker_start:!1,worker_end:!1},formTitle:"Добавление объекта",formBtnText:"Добавить объект",addForm:!1,addWorkerForm:!1,confirmArchiveDialog:!1,confirmDeleteDialog:!1,reqRules:[function(e){return!!e||"Необходимо заполнить поле"}],alertError:!1,alertSuccess:!1,alertMsg:""}},created:function(){localStorage.getItem("auth_token")?(this.$emit("set-auth"),$.a.ajaxSetup({headers:{Authorization:"Token "+localStorage.getItem("auth_token")}}),this.loadData(),this.loadClients()):sessionStorage.getItem("auth_token")?(this.$emit("set-auth"),$.a.ajaxSetup({headers:{Authorization:"Token "+sessionStorage.getItem("auth_token")}}),this.loadData(),this.loadClients()):this.$router.push({name:"Login"})},methods:{loadData:function(){var e=this;$.a.ajax({url:this.$hostname+"time-tracking/objects",type:"GET",success:function(t){e.objects=t.data.data},error:function(t){e.alertError=!0,e.alertMsg="Непредвиденная ошибка",console.log(t.data)}})},loadClients:function(){var e=this;$.a.ajax({url:this.$hostname+"time-tracking/clients",type:"GET",success:function(t){e.clients=t.data.data},error:function(t){e.alertError=!0,e.alertMsg="Непредвиденная ошибка",console.log(t.data)}})},loadContacts:function(e){var t=this;this.newObject.contact_id=null,this.contacts=[],$.a.ajax({url:this.$hostname+"time-tracking/clients-employees/"+e,type:"GET",success:function(e){t.contacts=e.data.data,t.contacts.forEach((function(e){e.label=e.lastname+" "+e.name+", "+e.position,console.log(e.label)}))},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}})},addObject:function(){var e=this;this.$refs.form.validate()&&(0===this.newObject.id?$.a.ajax({url:this.$hostname+"time-tracking/objects",type:"POST",data:{index:this.newObject.index,city:this.newObject.city,street:this.newObject.street,house:this.newObject.house,entrance:this.newObject.entrance,flat:this.newObject.flat,date_start:this.newObject.date_start,date_end:this.newObject.date_end,active:this.newObject.active,client_id:this.newObject.client_id,contact_id:this.newObject.contact_id,work_description:this.newObject.work_description,habitation:this.newObject.habitation,accident_insurance:this.newObject.accident_insurance,health_insurance:this.newObject.health_insurance},success:function(){console.log("Объект добавлен "),e.loadData(),e.closeForm()},error:function(t){e.alertError=!0,e.alertMsg="Непредвиденная ошибка",console.log(t.data)}}):this.editObject())},editObject:function(){var e=this;$.a.ajax({url:this.$hostname+"time-tracking/objects",type:"PUT",data:this.currentObject,success:function(){console.log("Объект изменен "),e.addForm?(e.loadData(),e.closeForm()):e.confirmArchiveDialog=!1},error:function(t){e.alertError=!0,e.alertMsg="Непредвиденная ошибка",console.log(t.data)}})},deleteObject:function(){var e=this;$.a.ajax({url:this.$hostname+"time-tracking/objects",type:"DELETE",data:{id:this.currentObject.id},success:function(){console.log("Объект удален"),e.loadData()},error:function(t){e.alertError=!0,e.alertMsg="Непредвиденная ошибка",console.log(t.data)}})},openObject:function(e){var t=this;this.currentObject=e,this.photo=this.loadPhoto(e.id),this.all=!1,$.a.ajax({url:this.$hostname+"time-tracking/objects/employees/"+this.currentObject.id,type:"GET",success:function(e){t.objectWorkers=e.data.data},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}}),$.a.ajax({url:this.$hostname+"time-tracking/objects/employees",type:"GET",success:function(e){t.workers=e.data.data,t.workers.forEach((function(e){e.label=e.lastname+" "+e.name+", "+e.position}))},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}})},loadPhoto:function(e){var t=this;$.a.ajax({url:this.$hostname+"time-tracking/objects/photos/"+e,type:"GET",success:function(e){t.photos=e.data.data},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}})},putObjectUser:function(){var e=this;this.addWorker.object_id=this.currentObject.id,$.a.ajax({url:this.$hostname+"time-tracking/objects/employees",type:"PUT",data:{id:this.addWorker.id,user_profile_id:this.addWorker.user_profile_id,object_id:this.addWorker.object_id,start_date:this.addWorker.start_date,end_date:this.addWorker.end_date,comment:this.addWorker.comment},success:function(e){console.log(e)},error:function(t){e.alertError=!0,e.alertMsg="Непредвиденная ошибка",console.log(t.data)}})},openAddForm:function(){this.formTitle="Добавление объекта",this.formBtnText="Добавить объект",this.addForm=!0},openEditForm:function(e){this.formTitle="Редактирование объекта",this.formBtnText="Сохранить объект",this.newObject=e,this.addForm=!0},openConfirmArchiveDialog:function(){this.currentObject.active&&!this.all||!this.currentObject.active&&this.all?(this.currentObject.active=!0,this.confirmArchiveDialog=!0):this.editObject()},cancelConfirmArchiveDialog:function(){this.currentObject.active=!1,this.confirmArchiveDialog=!1},openConfirmDeleteDialog:function(e){this.currentObject=e,this.archive||!this.all?this.confirmDeleteDialog=!0:this.openConfirmArchiveDialog()},closeForm:function(){this.addForm=!1,this.newObject={id:0,index:"",city:"",street:"",house:"",entrance:"",flat:"",date_start:"",date_end:"",active:!1,client_id:"",contact_id:"",work_description:null,habitation:null,accident_insurance:null,health_insurance:null},this.addWorker={user_profile_id:0,object_id:0,start_date:null,end_date:null,comment:null},this.addWorkerForm=!1},openFilters:function(){console.log("open filters"),$()(".content-list__filters").addClass("open"),$()(".content-list__btns").addClass("hidden")},closeFilters:function(){console.log("open filters"),$()(".content-list__filters").removeClass("open"),$()(".content-list__btns").removeClass("hidden")}}}),Ae=Se,Ne=i("2e4b"),He=i("1800"),Re=i("e449"),We=i("0fd9"),qe=i("0789"),Be=i("b974"),Ze=i("7efd"),ze=i("9dbe"),Ue=i("a844"),Ge=Object(l["a"])(Ae,Me,Te,!1,null,"45cae5ae",null),Ke=Ge.exports;d()(Ge,{VBtn:g["a"],VCard:xe["a"],VCardActions:Ce["a"],VCardText:Ce["b"],VCardTitle:Ce["c"],VCheckbox:D["a"],VDatePicker:Ne["a"],VDialog:Pe["a"],VForm:A["a"],VIcon:$e["a"],VImg:F["a"],VList:Oe["a"],VListItem:ye["a"],VListItemAction:He["a"],VListItemContent:Ve["a"],VListItemIcon:De["a"],VListItemSubtitle:Ve["b"],VListItemTitle:Ve["c"],VMenu:Re["a"],VRow:We["a"],VScaleTransition:qe["d"],VSelect:Be["a"],VSlideGroup:Ze["a"],VSlideItem:ze["a"],VSpacer:Fe["a"],VTextField:N["a"],VTextarea:Ue["a"],VToolbar:Ie["a"]});var Je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"workers flex-content"},[n("div",{staticClass:"summary-box"},[n("div",{staticClass:"summary-box__title"},[n("h3",[e._v("Работники")]),e.all?e._e():n("div",{staticClass:"addition-btn",on:{click:function(t){e.all=!0}}},[n("span",[e._v("К списку работников")]),n("back-icon")],1),e.all?n("div",{staticClass:" addition-btn content-list__filters-mobile",on:{click:e.openFilters}},[e._v("Фильтры ")]):e._e()]),e.all?n("div",{staticClass:"workers-all"},[n("div",{staticClass:"content-list__filters"},[n("v-icon",{attrs:{color:"grey lighten-1"},on:{click:e.closeFilters}},[e._v(" $deleteIcon ")]),n("v-text-field",{attrs:{placeholder:"Фамилия Имя",outlined:""},model:{value:e.filter.name,callback:function(t){e.$set(e.filter,"name",t)},expression:"filter.name"}}),n("v-select",{attrs:{items:e.selects,placeholder:"Должность",outlined:""},model:{value:e.filter.position,callback:function(t){e.$set(e.filter,"position",t)},expression:"filter.position"}}),n("v-text-field",{attrs:{placeholder:"Почта",outlined:""},model:{value:e.filter.email,callback:function(t){e.$set(e.filter,"email",t)},expression:"filter.email"}})],1),n("v-list",{staticClass:"workers__list content-list",attrs:{"three-line":""}},[e._l(e.profiles,(function(t){return[t.active!==e.archive&&t.auth_user_id.email.includes(e.filter.email)&&(t.name+" "+t.lastname).includes(e.filter.name)&&(t.position===e.filter.position||"Все"===e.filter.position)?n("v-list-item",{key:t.id},[n("v-list-item-avatar",{staticClass:"content-list__image"},[t.photo_path?n("v-img",{attrs:{src:i("5469")("./media"+t.photo_path)}}):e._e()],1),n("v-list-item-content",{on:{click:function(i){return e.openProfile(t)}}},[n("v-list-item-title",[e._v(e._s(t.name)+" "+e._s(t.lastname))]),n("v-list-item-subtitle",[n("span",[e._v(e._s(t.position))]),n("br"),n("span",[e._v(e._s(t.auth_user_id.email))])])],1),n("v-list-item-action",[n("v-icon",{attrs:{color:"grey lighten-1"},on:{click:function(i){return e.openConfirmDeleteDialog(t)}}},[e._v(" $deleteIcon ")])],1)],1):e._e()]}))],2),n("v-list",{staticClass:"content-list__btns"},[e.archive?e._e():n("v-list-item",{staticClass:"content-list__btns-add",on:{click:e.openAddForm}},[n("v-list-item-icon",[n("v-icon",[e._v("mdi-plus")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Добавить работника")])],1)],1),e.archive?n("v-list-item",{staticClass:"content-list__btns-add",on:{click:function(t){e.archive=!e.archive}}},[n("v-list-item-icon",[n("v-icon",[e._v("$archive")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Выйти из архива")])],1)],1):n("v-list-item",{staticClass:"content-list__btns-add",on:{click:function(t){e.archive=!e.archive}}},[n("v-list-item-icon",[n("v-icon",[e._v("$archive")])],1),n("v-list-item-content",[n("v-list-item-title",[e._v("Архив")])],1)],1)],1)],1):e._e(),e.all?e._e():n("div",{staticClass:"workers-open"},[n("div",{staticClass:"profile__image"},[e.currentProfile.photo_path?n("v-img",{attrs:{"lazy-src":i("5469")("./media"+e.currentProfile.photo_path),src:i("5469")("./media"+e.currentProfile.photo_path)}}):e._e(),n("div",{staticClass:"profile__change-photo",on:{click:function(t){e.photoDialog=!0}}},[e._v("Сменить фото")])],1),n("div",{staticClass:"profile__info"},[n("h3",[e._v("Личная информация")]),n("ul",[n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Имя")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.name))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Фамилия")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.lastname))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Дата рождения")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.birthdate))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Гражданство")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.citizenship))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Должность")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.position))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Номер соц. страхования")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.social_code_own))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Финский номер соц. страхования")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.social_code_fin))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Работает")]),n("v-checkbox",{on:{change:e.openConfirmArchiveDialog},model:{value:e.currentProfile.active,callback:function(t){e.$set(e.currentProfile,"active",t)},expression:"currentProfile.active"}})],1)]),n("h3",[e._v("Контакты")]),n("ul",[n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Телефон")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.phone))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Телефон в Финляндии")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.phone_fin))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("E-mail")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.auth_user_id.email))])])]),n("h3",[e._v("Банковская информация")]),n("ul",[n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Налоговый номер")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.tax_number))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Счет в банке")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.bank_account))])])]),n("div",{staticClass:"open__actions"},[n("div",{staticClass:"addition-btn",on:{click:function(t){e.full=!e.full}}},[e.full?n("span",[e._v("Скрыть полную информацию")]):e._e(),e.full?e._e():n("span",[e._v("Показать полную информацию")])])]),e.full?n("div",{staticClass:"profile__info profile__info-full"},[n("h3",[e._v("Адреса")]),n("ul",[n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Адрес в своей стране")]),""!==e.currentProfile.address_own.city?n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.address_own.index)+" "+e._s(e.currentProfile.address_own.country)+", г."+e._s(e.currentProfile.address_own.city)+", "+e._s(e.currentProfile.address_own.street)+", д."+e._s(e.currentProfile.address_own.house)+", "+e._s(e.currentProfile.address_own.entrance)+", кв."+e._s(e.currentProfile.address_own.flat))]):e._e()]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Адрес в Финляндии")]),""!==e.currentProfile.address_fin.city?n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.address_fin.index)+" "+e._s(e.currentProfile.address_fin.country)+", г."+e._s(e.currentProfile.address_fin.city)+", "+e._s(e.currentProfile.address_fin.street)+", д."+e._s(e.currentProfile.address_fin.house)+", "+e._s(e.currentProfile.address_fin.entrance)+", кв."+e._s(e.currentProfile.address_fin.flat))]):e._e()])]),n("h3",[e._v("Одежда (размеры)")]),n("ul",[n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Ботинки")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.boots))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Куртка")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.jacket))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Штаны")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.pants))])]),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Футболка")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.shirt))])])]),n("h3",[e._v("Языки")]),n("ul",[n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Русский")]),n("v-checkbox",{staticClass:"profile__info-content",attrs:{disabled:""},model:{value:e.currentProfile.russian,callback:function(t){e.$set(e.currentProfile,"russian",t)},expression:"currentProfile.russian"}})],1),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Английский")]),n("v-checkbox",{staticClass:"profile__info-content",attrs:{disabled:""},model:{value:e.currentProfile.english,callback:function(t){e.$set(e.currentProfile,"english",t)},expression:"currentProfile.english"}})],1),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Эстонский")]),n("v-checkbox",{staticClass:"profile__info-content",attrs:{disabled:""},model:{value:e.currentProfile.estonian,callback:function(t){e.$set(e.currentProfile,"estonian",t)},expression:"currentProfile.estonian"}})],1),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Финский")]),n("v-checkbox",{staticClass:"profile__info-content",attrs:{disabled:""},model:{value:e.currentProfile.finnish,callback:function(t){e.$set(e.currentProfile,"finnish",t)},expression:"currentProfile.finnish"}})],1),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Другие")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.other_language))])])]),n("h3",[e._v("Другое")]),n("ul",[n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Свой автомобиль")]),n("v-checkbox",{staticClass:"profile__info-content",attrs:{disabled:""},model:{value:e.currentProfile.auto,callback:function(t){e.$set(e.currentProfile,"auto",t)},expression:"currentProfile.auto"}})],1),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Свой инструмент")]),n("v-checkbox",{staticClass:"profile__info-content",attrs:{disabled:""},model:{value:e.currentProfile.tool,callback:function(t){e.$set(e.currentProfile,"tool",t)},expression:"currentProfile.tool"}})],1),n("li",[n("span",{staticClass:"profile__info-title"},[e._v("Навыки")]),n("span",{staticClass:"profile__info-content"},[e._v(e._s(e.currentProfile.skills))])])])]):e._e(),n("div",{staticClass:"news-open__actions open__actions"},[n("div",{staticClass:"addition-btn",on:{click:function(t){return e.openEditForm(e.currentProfile)}}},[n("edit-icon"),e._v(" Редактировать работника ")],1),n("div",{staticClass:"addition-btn",on:{click:function(t){return e.openConfirmDeleteDialog(e.currentProfile)}}},[n("waste-icon"),e._v(" Удалить работника ")],1)])])])]),n("v-dialog",{model:{value:e.addForm,callback:function(t){e.addForm=t},expression:"addForm"}},[n("v-card",[n("v-toolbar",{attrs:{flat:""}},[n("v-spacer"),n("v-btn",{attrs:{icon:""},on:{click:e.closeForm}},[n("v-icon",[e._v("mdi-close")])],1)],1),n("h3",[e._v(e._s(e.formTitle))]),n("v-card-text",[n("v-form",{ref:"addForm",attrs:{model:e.newProfile}},[n("v-row",[n("v-text-field",{attrs:{placeholder:"Фамилия*",rules:e.reqRules,required:"",outlined:""},model:{value:e.newProfile.lastname,callback:function(t){e.$set(e.newProfile,"lastname",t)},expression:"newProfile.lastname"}}),n("v-text-field",{attrs:{placeholder:"Имя*",rules:e.reqRules,required:"",outlined:""},model:{value:e.newProfile.name,callback:function(t){e.$set(e.newProfile,"name",t)},expression:"newProfile.name"}})],1),n("v-row",[n("v-text-field",{attrs:{placeholder:"Гражданство*",rules:e.reqRules,required:"",outlined:""},model:{value:e.newProfile.citizenship,callback:function(t){e.$set(e.newProfile,"citizenship",t)},expression:"newProfile.citizenship"}}),n("v-menu",{ref:"menu",attrs:{"close-on-content-click":!1,"return-value":e.newProfile.birthdate,transition:"scale-transition","offset-y":"","min-width":"auto"},on:{"update:returnValue":function(t){return e.$set(e.newProfile,"birthdate",t)},"update:return-value":function(t){return e.$set(e.newProfile,"birthdate",t)}},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,a=t.attrs;return[n("v-text-field",e._g(e._b({attrs:{readonly:"",placeholder:"Дата рождения*",rules:e.reqRules,outlined:""},model:{value:e.newProfile.birthdate,callback:function(t){e.$set(e.newProfile,"birthdate",t)},expression:"newProfile.birthdate"}},"v-text-field",a,!1),i))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[n("v-date-picker",{attrs:{"no-title":"",scrollable:""},model:{value:e.newProfile.birthdate,callback:function(t){e.$set(e.newProfile,"birthdate",t)},expression:"newProfile.birthdate"}},[n("v-spacer"),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){e.menu=!1}}},[e._v(" Cancel")]),n("v-btn",{attrs:{text:"",color:"primary"},on:{click:function(t){return e.$refs.menu.save(e.newProfile.birthdate)}}},[e._v(" OK")])],1)],1)],1),n("v-row",[n("v-text-field",{attrs:{placeholder:"Номер социального страхования",outlined:""},model:{value:e.newProfile.social_code_own,callback:function(t){e.$set(e.newProfile,"social_code_own",t)},expression:"newProfile.social_code_own"}}),n("v-text-field",{attrs:{placeholder:"Номер соц. страхования в Финляндии*",rules:e.reqRules,required:"",outlined:""},model:{value:e.newProfile.social_code_fin,callback:function(t){e.$set(e.newProfile,"social_code_fin",t)},expression:"newProfile.social_code_fin"}})],1),n("h4",[e._v("Адрес в своей стране")]),n("v-row",[n("v-text-field",{attrs:{placeholder:"Страна",outlined:""},model:{value:e.newProfile.address_own.country,callback:function(t){e.$set(e.newProfile.address_own,"country",t)},expression:"newProfile.address_own.country"}}),n("v-text-field",{attrs:{placeholder:"Город",outlined:""},model:{value:e.newProfile.address_own.city,callback:function(t){e.$set(e.newProfile.address_own,"city",t)},expression:"newProfile.address_own.city"}})],1),n("v-row",[n("v-text-field",{attrs:{placeholder:"Улица",outlined:""},model:{value:e.newProfile.address_own.street,callback:function(t){e.$set(e.newProfile.address_own,"street",t)},expression:"newProfile.address_own.street"}}),n("v-text-field",{attrs:{placeholder:"Индекс",outlined:""},model:{value:e.newProfile.address_own.index,callback:function(t){e.$set(e.newProfile.address_own,"index",t)},expression:"newProfile.address_own.index"}})],1),n("v-row",[n("v-text-field",{attrs:{placeholder:"Дом",outlined:""},model:{value:e.newProfile.address_own.house,callback:function(t){e.$set(e.newProfile.address_own,"house",t)},expression:"newProfile.address_own.house"}}),n("v-text-field",{attrs:{placeholder:"Подъезд",outlined:""},model:{value:e.newProfile.address_own.entrance,callback:function(t){e.$set(e.newProfile.address_own,"entrance",t)},expression:"newProfile.address_own.entrance"}}),n("v-text-field",{attrs:{placeholder:"Квартира",outlined:""},model:{value:e.newProfile.address_own.flat,callback:function(t){e.$set(e.newProfile.address_own,"flat",t)},expression:"newProfile.address_own.flat"}})],1),n("h4",[e._v("Адрес в Финляндии")]),n("v-row",[n("v-text-field",{attrs:{placeholder:"Страна",outlined:""},model:{value:e.newProfile.address_fin.country,callback:function(t){e.$set(e.newProfile.address_fin,"country",t)},expression:"newProfile.address_fin.country"}}),n("v-text-field",{attrs:{placeholder:"Город",outlined:""},model:{value:e.newProfile.address_fin.city,callback:function(t){e.$set(e.newProfile.address_fin,"city",t)},expression:"newProfile.address_fin.city"}})],1),n("v-row",[n("v-text-field",{attrs:{placeholder:"Улица",outlined:""},model:{value:e.newProfile.address_fin.street,callback:function(t){e.$set(e.newProfile.address_fin,"street",t)},expression:"newProfile.address_fin.street"}}),n("v-text-field",{attrs:{placeholder:"Индекс",outlined:""},model:{value:e.newProfile.address_fin.index,callback:function(t){e.$set(e.newProfile.address_fin,"index",t)},expression:"newProfile.address_fin.index"}})],1),n("v-row",[n("v-text-field",{attrs:{placeholder:"Дом",outlined:""},model:{value:e.newProfile.address_fin.house,callback:function(t){e.$set(e.newProfile.address_fin,"house",t)},expression:"newProfile.address_fin.house"}}),n("v-text-field",{attrs:{placeholder:"Подъезд",outlined:""},model:{value:e.newProfile.address_fin.entrance,callback:function(t){e.$set(e.newProfile.address_fin,"entrance",t)},expression:"newProfile.address_fin.entrance"}}),n("v-text-field",{attrs:{placeholder:"Квартира",outlined:""},model:{value:e.newProfile.address_fin.flat,callback:function(t){e.$set(e.newProfile.address_fin,"flat",t)},expression:"newProfile.address_fin.flat"}})],1),n("v-row",[n("v-text-field",{attrs:{placeholder:"Телефон",rules:e.phoneRules,required:"",outlined:""},model:{value:e.newProfile.phone,callback:function(t){e.$set(e.newProfile,"phone",t)},expression:"newProfile.phone"}}),n("v-text-field",{attrs:{placeholder:"Телефон в Финляндии*",rules:e.phoneFinRules,required:"",outlined:""},model:{value:e.newProfile.phone_fin,callback:function(t){e.$set(e.newProfile,"phone_fin",t)},expression:"newProfile.phone_fin"}})],1),n("v-text-field",{attrs:{placeholder:"Почта*",rules:e.emailRules,required:"",outlined:""},model:{value:e.newProfile.email,callback:function(t){e.$set(e.newProfile,"email",t)},expression:"newProfile.email"}}),n("v-text-field",{attrs:{placeholder:"Номер счета в банке*",rules:e.reqRules,required:"",outlined:""},model:{value:e.newProfile.bank_account,callback:function(t){e.$set(e.newProfile,"bank_account",t)},expression:"newProfile.bank_account"}}),n("v-text-field",{attrs:{placeholder:"Налоговый номер*",rules:e.reqRules,required:"",outlined:""},model:{value:e.newProfile.tax_number,callback:function(t){e.$set(e.newProfile,"tax_number",t)},expression:"newProfile.tax_number"}}),n("v-row",[n("v-checkbox",{attrs:{label:"Свой автомобиль"},model:{value:e.newProfile.auto,callback:function(t){e.$set(e.newProfile,"auto",t)},expression:"newProfile.auto"}}),n("v-checkbox",{attrs:{label:"Свой инструмент"},model:{value:e.newProfile.tool,callback:function(t){e.$set(e.newProfile,"tool",t)},expression:"newProfile.tool"}})],1),n("h4",[e._v("Языки")]),n("v-row",[n("v-checkbox",{attrs:{label:"Английский"},model:{value:e.newProfile.english,callback:function(t){e.$set(e.newProfile,"english",t)},expression:"newProfile.english"}}),n("v-checkbox",{attrs:{label:"Финский"},model:{value:e.newProfile.finnish,callback:function(t){e.$set(e.newProfile,"finnish",t)},expression:"newProfile.finnish"}}),n("v-checkbox",{attrs:{label:"Русский"},model:{value:e.newProfile.russian,callback:function(t){e.$set(e.newProfile,"russian",t)},expression:"newProfile.russian"}}),n("v-checkbox",{attrs:{label:"Эстонский"},model:{value:e.newProfile.estonian,callback:function(t){e.$set(e.newProfile,"estonian",t)},expression:"newProfile.estonian"}})],1),n("v-text-field",{attrs:{placeholder:"Другие языки",outlined:""},model:{value:e.newProfile.other_language,callback:function(t){e.$set(e.newProfile,"other_language",t)},expression:"newProfile.other_language"}}),n("v-combobox",{ref:"positionCombobox",attrs:{items:e.positions,placeholder:"Должность*",outlined:"",dense:"",rules:e.reqRules},model:{value:e.newProfile.position,callback:function(t){e.$set(e.newProfile,"position",t)},expression:"newProfile.position"}}),n("v-textarea",{attrs:{placeholder:"Что умеете делать?",outlined:""},model:{value:e.newProfile.skills,callback:function(t){e.$set(e.newProfile,"skills",t)},expression:"newProfile.skills"}}),n("h4",[e._v("Одежда")]),n("v-row",[n("v-text-field",{attrs:{placeholder:"Ботинки",outlined:""},model:{value:e.newProfile.boots,callback:function(t){e.$set(e.newProfile,"boots",t)},expression:"newProfile.boots"}}),n("v-text-field",{attrs:{placeholder:"Куртка",outlined:""},model:{value:e.newProfile.jacket,callback:function(t){e.$set(e.newProfile,"jacket",t)},expression:"newProfile.jacket"}}),n("v-text-field",{attrs:{placeholder:"Штаны",outlined:""},model:{value:e.newProfile.pants,callback:function(t){e.$set(e.newProfile,"pants",t)},expression:"newProfile.pants"}}),n("v-text-field",{attrs:{placeholder:"Футболка",outlined:""},model:{value:e.newProfile.shirt,callback:function(t){e.$set(e.newProfile,"shirt",t)},expression:"newProfile.shirt"}})],1)],1)],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{staticClass:"action-btn",attrs:{color:"primary"},on:{click:e.addUser}},[e._v(e._s(e.formBtnText))])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"500"},model:{value:e.confirmDeleteDialog,callback:function(t){e.confirmDeleteDialog=t},expression:"confirmDeleteDialog"}},[n("v-card",[n("v-card-title",[e._v(" Удаление работника ")]),n("v-card-text",[e._v("Вы действительно хотите удалить профиль? Отменить это действие будет невозможно")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"secondary",text:""},on:{click:function(t){e.confirmDeleteDialog=!1}}},[e._v("Отменить")]),n("v-btn",{attrs:{color:"primary",text:""},on:{click:function(t){return e.deleteUser(null)}}},[e._v("Подтвердить")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"500"},model:{value:e.confirmArchiveDialog,callback:function(t){e.confirmArchiveDialog=t},expression:"confirmArchiveDialog"}},[n("v-card",[n("v-card-title",[e._v(" Увольнение работника ")]),n("v-card-text",[e._v(" Вы действительно хотите уволить работника? После подтверждения профиль будет перемещен в архив ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"secondary",text:""},on:{click:e.cancelConfirmArchiveDialog}},[e._v(" Отменить ")]),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.editProfile}},[e._v("Подтвердить")])],1)],1)],1),n("v-dialog",{attrs:{"max-width":"500"},model:{value:e.photoDialog,callback:function(t){e.photoDialog=t},expression:"photoDialog"}},[n("v-card",[n("v-card-title",[e._v(" Сменить фото ")]),n("v-card-text",[n("v-file-input",{attrs:{placeholder:"Фото профиля",accept:"image/*","prepend-icon":"",outlined:""},model:{value:e.photoField,callback:function(t){e.photoField=t},expression:"photoField"}})],1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary",text:""},on:{click:e.savePhoto}},[e._v("Сохранить")])],1)],1)],1)],1)},Qe=[],Xe={name:"Workers",components:{WasteIcon:te,EditIcon:re,BackIcon:_e},data:function(){return{page:"home",all:!0,full:!1,archive:!1,profiles:{},positions:["Администратор","Маляр","Строитель"],selects:["Все","Администратор","Маляр","Строитель"],newProfile:{id:0,lastname:"",name:"",citizenship:"",birthdate:"",social_code_own:"",social_code_fin:"",address_own:{index:"",country:"",city:"",street:"",house:"",entrance:"",flat:""},address_fin:{index:"",country:"",city:"",street:"",house:"",entrance:"",flat:""},phone:"",phone_fin:"",email:"",bank_account:"",tax_number:"",auto:!1,tool:!1,english:!1,estonian:!1,finnish:!1,russian:!1,other_language:"",position:"",skills:"",boots:null,jacket:null,pants:null,shirt:null,is_staff:!1,photo_path:null},currentProfile:{id:0,auth_user_id:"",lastname:"",name:"",position:"",email:"",phone:"",is_staff:!1,active:!0,photo_path:null},filter:{name:"",position:"Все",email:""},formTitle:"Добавление работника",formBtnText:"Добавить работника",addForm:!1,confirmArchiveDialog:!1,confirmDeleteDialog:!1,photoField:null,photoDialog:!1,menu:!1,alertError:!1,alertMsg:"",reqRules:[function(e){return!!e||"Необходимо заполнить поле"}],emailRules:[function(e){return!!e||"Необходимо заполнить поле"},function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)||"Некорректный E-mail"}],phoneRules:[function(e){return!!e||""},function(e){return/^(\+)?((\d{2,3}) ?\d|\d)(([ -]?\d)|( ?(\d{2,3}) ?)){5,12}\d$/.test(e)||"Некорректный номер телефона"}],phoneFinRules:[function(e){return!!e||"Необходимо заполнить поле"},function(e){return/^((([+][\s]{0,1})|([0]{2}[\s-]{0,1}))([358]{3})([\s-]{0,1})|([0]{1}))(([1-9]{1}[0-9]{0,1})([\s-]{0,1})([0-9]{2,4})([\s-]{0,1})([0-9]{2,4})([\s-]{0,1}))([0-9]{0,3}){1}$/.test(e)||"Некорректный номер телефона"}]}},created:function(){localStorage.getItem("auth_token")?(this.$emit("set-auth"),$.a.ajaxSetup({headers:{Authorization:"Token "+localStorage.getItem("auth_token")}}),this.loadData()):sessionStorage.getItem("auth_token")?(this.$emit("set-auth"),$.a.ajaxSetup({headers:{Authorization:"Token "+sessionStorage.getItem("auth_token")}}),this.loadData()):this.$router.push({name:"Login"})},methods:{loadData:function(){var e=this;$.a.ajax({url:this.$hostname+"time-tracking/profiles",type:"GET",success:function(t){e.profiles=t.data.data},error:function(t){console.log(t),500===t.status?e.alertMsg="Ошибка соединения с сервером":e.alertMsg="Непредвиденная ошибка",e.alertError=!0}})},addUser:function(){var e=this;this.$refs.addForm.validate()?0!==this.newProfile.id?this.editProfile():$.a.ajax({url:this.$hostname+"time-tracking/user",type:"POST",data:{username:this.newProfile.email,email:this.newProfile.email,is_staff:this.newProfile.is_staff,password:"12345678"},success:function(t){e.addProfile(t.data.data.id)},error:function(t){e.alertError=!0,e.alertMsg="Непредвиденная ошибка",console.log(t.data)}}):(this.alertError=!0,this.alertMsg="Заполните все обязательные поля")},addProfile:function(e){var t=this;$.a.ajax({url:this.$hostname+"time-tracking/profiles",type:"POST",data:{auth_user_id:e,name:this.newProfile.name,lastname:this.newProfile.lastname,citizenship:this.newProfile.citizenship,birthdate:this.newProfile.birthdate,social_code_own:this.newProfile.social_code_own,social_code_fin:this.newProfile.social_code_fin,address_own:JSON.stringify(this.newProfile.address_own),address_fin:JSON.stringify(this.newProfile.address_fin),phone:this.newProfile.phone,phone_fin:this.newProfile.phone_fin,bank_account:this.newProfile.bank_account,tax_number:this.newProfile.tax_number,auto:this.newProfile.auto,tool:this.newProfile.tool,english:this.newProfile.english,estonian:this.newProfile.estonian,finnish:this.newProfile.finnish,russian:this.newProfile.russian,other_language:this.newProfile.other_language,position:this.newProfile.position,skills:this.newProfile.skills,boots:this.newProfile.boots,jacket:this.newProfile.jacket,pants:this.newProfile.pants,shirt:this.newProfile.shirt,photo_path:this.currentProfile.photo_path,active:!0},success:function(){t.alertMsg="Пользователь добавлен",t.closeForm(),t.loadData()},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}})},editProfile:function(){var e=this;$.a.ajax({url:this.$hostname+"time-tracking/profiles",type:"PUT",data:this.currentProfile,success:function(){console.log("Профиль изменен"),e.addForm?e.editUser():(e.confirmArchiveDialog=!1,e.loadData())},error:function(t){e.alertError=!0,e.alertMsg="Непредвиденная ошибка",console.log(t.data)}})},editUser:function(){var e=this;this.currentProfile.auth_user_id.email=this.newProfile.email,$.a.ajax({url:this.$hostname+"time-tracking/user",type:"PUT",data:{id:this.newProfile.auth_user_id.id,username:this.newProfile.email,email:this.newProfile.email},success:function(){console.log("Пользователь изменен"),e.loadData(),e.closeForm()},error:function(t){e.alertError=!0,e.alertMsg="Непредвиденная ошибка",console.log(t.data)}})},savePhoto:function(){var e=this,t=i("bc3a"),n=new FormData,a=this.photoField;void 0!==a?(n.append("image",a),t({method:"put",url:this.$hostname+"time-tracking/profiles/"+this.currentProfile.id,headers:{Authorization:"Token "+(sessionStorage.getItem("auth_token")||localStorage.getItem("auth_token"))},data:n}).then((function(t){console.log(t.data.data),e.photoDialog=!1,e.photoField=null,e.currentProfile.photo_path=t.data.data.name,e.loadData()}))):console.log("ERROR")},deleteUser:function(e){var t=this;null==e&&(e=this.currentProfile.email),console.log(e),$.a.ajax({url:this.$hostname+"time-tracking/user",type:"DELETE",data:{email:e},success:function(){t.alertMsg="Пользователь удален",t.loadData(),t.confirmDeleteDialog=!1},error:function(e){t.alertError=!0,t.alertMsg="Непредвиденная ошибка",console.log(e.data)}})},openProfile:function(e){this.currentProfile=e,this.all=!1},closeForm:function(){this.addForm=!1,this.newProfile={id:0,lastname:"",name:"",citizenship:"",birthdate:"",social_code_own:"",social_code_fin:"",address_own:{index:"",country:"",city:"",street:"",house:"",entrance:"",flat:""},address_fin:{index:"",country:"",city:"",street:"",house:"",entrance:"",flat:""},phone:"",phone_fin:"",email:"",bank_account:"",tax_number:"",auto:!1,tool:!1,english:!1,estonian:!1,finnish:!1,russian:!1,other_language:"",position:"",skills:"",boots:null,jacket:null,pants:null,shirt:null,photo_path:null,is_staff:!1}},openAddForm:function(){this.formTitle="Добавление работника",this.formBtnText="Добавить работника",this.addForm=!0},openEditForm:function(e){this.formTitle="Редактирование работника",this.formBtnText="Сохранить работника",this.newProfile=e,this.newProfile.email=e.auth_user_id.email,this.addForm=!0},openConfirmArchiveDialog:function(){console.log(this.currentProfile.id),!this.currentProfile.active&&!this.all||this.currentProfile.active&&this.all?(this.currentProfile.active=!1,this.confirmArchiveDialog=!0):this.editProfile()},cancelConfirmArchiveDialog:function(){this.currentProfile.active=!0,this.confirmArchiveDialog=!1},openConfirmDeleteDialog:function(e){this.currentProfile=e,this.currentProfile.email=e.auth_user_id.email,this.archive||!this.all?this.confirmDeleteDialog=!0:this.openConfirmArchiveDialog()},openFilters:function(){console.log("open filters"),$()(".content-list__filters").addClass("open"),$()(".content-list__btns").addClass("hidden")},closeFilters:function(){console.log("open filters"),$()(".content-list__filters").removeClass("open"),$()(".content-list__btns").removeClass("hidden")}}},Ye=Xe,et=i("2b5d"),tt=i("8270"),it=Object(l["a"])(Ye,Je,Qe,!1,null,"7a06bef1",null),nt=it.exports;d()(it,{VBtn:g["a"],VCard:xe["a"],VCardActions:Ce["a"],VCardText:Ce["b"],VCardTitle:Ce["c"],VCheckbox:D["a"],VCombobox:et["a"],VDatePicker:Ne["a"],VDialog:Pe["a"],VFileInput:je["a"],VForm:A["a"],VIcon:$e["a"],VImg:F["a"],VList:Oe["a"],VListItem:ye["a"],VListItemAction:He["a"],VListItemAvatar:tt["a"],VListItemContent:Ve["a"],VListItemIcon:De["a"],VListItemSubtitle:Ve["b"],VListItemTitle:Ve["c"],VMenu:Re["a"],VRow:We["a"],VSelect:Be["a"],VSpacer:Fe["a"],VTextField:N["a"],VTextarea:Ue["a"],VToolbar:Ie["a"]}),n["a"].use(v["a"]);var at=[{path:"/",name:"Index",component:x},{path:"/profile",name:"Home",component:E},{path:"/login",name:"Login",component:R},{path:"/recover",name:"RecoverPassword",component:U},{path:"/news",name:"News",component:Le},{path:"/objects",name:"Objects",component:Ke},{path:"/workers",name:"Workers",component:nt}],ot=new v["a"]({routes:at}),st=ot,rt=i("f309"),lt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{attrs:{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M32.1563 26.8481L26.467 23.1502L28.6119 19.2178C29.1119 18.2995 29.3742 17.2707 29.375 16.2251V10C29.375 7.67936 28.4531 5.45376 26.8122 3.81282C25.1712 2.17187 22.9456 1.25 20.625 1.25C18.3044 1.25 16.0788 2.17187 14.4378 3.81282C12.7969 5.45376 11.875 7.67936 11.875 10V16.2251C11.8758 17.2707 12.1381 18.2996 12.6381 19.2179L14.7831 23.1502L9.09376 26.8481C8.21939 27.4142 7.50093 28.1904 7.00413 29.1059C6.50733 30.0214 6.24805 31.0468 6.25001 32.0884V38.75H35V32.0884C35.002 31.0469 34.7427 30.0214 34.2459 29.1059C33.7491 28.1904 33.0306 27.4142 32.1563 26.8481ZM32.5 36.25H8.75001V32.0884C8.74884 31.4635 8.90442 30.8482 9.20252 30.2989C9.50061 29.7496 9.9317 29.2838 10.4563 28.9442L18.086 23.9849L14.8329 18.0208C14.5329 17.4698 14.3755 16.8525 14.375 16.2251V10C14.375 8.3424 15.0335 6.75269 16.2056 5.58058C17.3777 4.40848 18.9674 3.75 20.625 3.75C22.2826 3.75 23.8723 4.40848 25.0444 5.58058C26.2165 6.75269 26.875 8.3424 26.875 10V16.2251C26.8745 16.8525 26.7171 17.4698 26.4171 18.0208L23.1641 23.9849L30.7939 28.9442C31.3185 29.2839 31.7495 29.7496 32.0476 30.2989C32.3457 30.8482 32.5012 31.4635 32.5 32.0884V36.25Z",fill:"#333333"}})])},ct=[],dt={name:"loginIcon"},ut=dt,ft=Object(l["a"])(ut,lt,ct,!1,null,"3fd92f9f",null),_t=ft.exports,pt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{attrs:{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M30 15.625V11.25C30 8.59784 28.9464 6.0543 27.0711 4.17893C25.1957 2.30357 22.6522 1.25 20 1.25C17.3478 1.25 14.8043 2.30357 12.9289 4.17893C11.0536 6.0543 10 8.59784 10 11.25V15.625H6.875V25.625C6.875 32.8621 12.7628 38.75 20 38.75C27.2372 38.75 33.125 32.8621 33.125 25.625V15.625H30ZM12.5 11.25C12.5 9.26088 13.2902 7.35322 14.6967 5.9467C16.1032 4.54018 18.0109 3.75 20 3.75C21.9891 3.75 23.8968 4.54018 25.3033 5.9467C26.7098 7.35322 27.5 9.26088 27.5 11.25V15.625H12.5V11.25ZM30.625 25.625C30.625 31.4836 25.8586 36.25 20 36.25C14.1414 36.25 9.375 31.4836 9.375 25.625V18.125H30.625V25.625Z",fill:"#333333"}})])},vt=[],ht={name:"passwordIcon"},mt=ht,bt=Object(l["a"])(mt,pt,vt,!1,null,"3d899d96",null),wt=bt.exports,gt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M19 1L1 19M1 1L19 19",stroke:"#616161","stroke-linecap":"round"}})])},kt=[],xt={name:"deleteIcon"},Ct=xt,Pt=Object(l["a"])(Ct,gt,kt,!1,null,"66f72e37",null),jt=Pt.exports,$t=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{attrs:{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M10.3338 18.3501C10.1038 18.3501 9.94877 18.3726 9.86877 18.3951V19.8676C9.96377 19.8901 10.0825 19.8963 10.2463 19.8963C10.845 19.8963 11.2138 19.5938 11.2138 19.0826C11.2138 18.6251 10.8963 18.3501 10.3338 18.3501ZM14.6925 18.3651C14.4425 18.3651 14.28 18.3876 14.1838 18.4101V21.6726C14.28 21.6951 14.435 21.6951 14.575 21.6951C15.5963 21.7026 16.2613 21.1401 16.2613 19.9501C16.2688 18.9126 15.6625 18.3651 14.6925 18.3651Z",fill:"#616161"}}),i("path",{attrs:{d:"M17.5 2.5H7.5C6.83696 2.5 6.20107 2.76339 5.73223 3.23223C5.26339 3.70107 5 4.33696 5 5V25C5 25.663 5.26339 26.2989 5.73223 26.7678C6.20107 27.2366 6.83696 27.5 7.5 27.5H22.5C23.163 27.5 23.7989 27.2366 24.2678 26.7678C24.7366 26.2989 25 25.663 25 25V10L17.5 2.5ZM11.8725 20.2375C11.4863 20.6 10.9162 20.7625 10.2525 20.7625C10.1238 20.7639 9.99516 20.7564 9.8675 20.74V22.5225H8.75V17.6025C9.25432 17.5273 9.7639 17.493 10.2737 17.5C10.97 17.5 11.465 17.6325 11.7987 17.8988C12.1163 18.1513 12.3312 18.565 12.3312 19.0525C12.33 19.5425 12.1675 19.9563 11.8725 20.2375ZM16.6313 21.9313C16.1063 22.3675 15.3075 22.575 14.3313 22.575C13.7463 22.575 13.3325 22.5375 13.0513 22.5V17.6038C13.5558 17.5301 14.0652 17.4954 14.575 17.5C15.5212 17.5 16.1363 17.67 16.6163 18.0325C17.135 18.4175 17.46 19.0313 17.46 19.9125C17.46 20.8663 17.1112 21.525 16.6313 21.9313ZM21.25 18.4625H19.335V19.6013H21.125V20.5188H19.335V22.5238H18.2025V17.5375H21.25V18.4625ZM17.5 11.25H16.25V5L22.5 11.25H17.5Z",fill:"#616161"}})])},Ot=[],yt={name:"pdfIcon"},Vt=yt,Dt=Object(l["a"])(Vt,$t,Ot,!1,null,"6bec5be6",null),Ft=Dt.exports,It=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{attrs:{width:"74",height:"74",viewBox:"0 0 74 74",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M37 1V73M73 37L1 37",stroke:"#616161","stroke-width":"2","stroke-linecap":"round"}})])},Et=[],Lt={name:"addNewIcon"},Mt=Lt,Tt=Object(l["a"])(Mt,It,Et,!1,null,"432a762a",null),St=Tt.exports,At=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{attrs:{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[i("path",{attrs:{d:"M27.1325 6.61375L23.3838 2.86625C23.2679 2.74995 23.1301 2.65771 22.9785 2.59486C22.8268 2.532 22.6642 2.49976 22.5 2.5H7.5C7.33582 2.49976 7.17322 2.532 7.02155 2.59486C6.86988 2.65771 6.73214 2.74995 6.61625 2.86625L2.8675 6.61375C2.75071 6.72959 2.65809 6.86748 2.595 7.0194C2.53192 7.17132 2.49963 7.33425 2.5 7.49875V23.75C2.5 25.1287 3.62125 26.25 5 26.25H25C26.3788 26.25 27.5 25.1287 27.5 23.75V7.49875C27.5004 7.33425 27.4681 7.17132 27.405 7.0194C27.3419 6.86748 27.2493 6.72959 27.1325 6.61375ZM8.0175 5H21.9825L23.2313 6.24875H6.76875L8.0175 5ZM5 23.75V8.74875H25L25.0025 23.75H5Z",fill:"#616161"}}),i("path",{attrs:{d:"M18.75 15H11.25V12.5H8.75V17.5H21.25V12.5H18.75V15Z",fill:"#616161"}})])},Nt=[],Ht={name:"archiveIcon"},Rt=Ht,Wt=Object(l["a"])(Rt,At,Nt,!1,null,"1fd8871a",null),qt=Wt.exports;n["a"].use(rt["a"]);var Bt=new rt["a"]({theme:{themes:{options:{customProperties:!0},light:{primary:"#3D6FB6",secondary:"#6386B9",accent:"#673ab7",alert:"#f44336",error:"#f44336",warning:"#ff9800",info:"#3D6FB6",success:"#3D6FB6",text:{primary:"#333333",secondary:"#616161"}}}},icons:{values:{addNew:{component:St},addPhoto:{component:we},archive:{component:qt},deleteIcon:{component:jt},edit:{component:re},login:{component:_t},password:{component:wt},pdf:{component:Ft},waste:{component:te}}}}),Zt=i("2004"),zt=i.n(Zt);n["a"].config.productionTip=!1,new n["a"]({router:st,vuetify:Bt,render:function(e){return e(p)}}).$mount("#app"),n["a"].use(zt.a,{name:"v-editor",editorConfig:{uploadImgUrl:"/api/upload",printLog:!1,useLang:"en"},uploadHandler:function(e,t){if("success"===e){var i=JSON.parse(t);return 1!==i.status?null:i.data}return"error"===e?alert("Ошибка загрузки"):"timeout"===e&&alert("Время ожидания превышено"),"upload failed__"}})},"85ec":function(e,t,i){},dd63:function(e,t,i){e.exports=i.p+"img/99px_ru_wallpaper_170600_vetochka_lavandi_lejit_na_raskritoj_knige.jpg"},f601:function(e,t,i){e.exports=i.p+"img/159708450387.jpg"},fb62:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"menu"},[n("div",{staticClass:"menu-burger",on:{click:e.showMobileMenu}},[n("div",{staticClass:"menu-burger__item"}),n("div",{staticClass:"menu-burger__item"}),n("div",{staticClass:"menu-burger__item"})]),n("div",{staticClass:"menu__profile",on:{click:function(t){return e.goPage(0)}}},[null!=e.user.photo_path?n("v-img",{attrs:{"lazy-src":i("5469")("./media"+e.user.photo_path),src:i("5469")("./media"+e.user.photo_path)}}):e._e()],1),n("v-list",{staticClass:"menu-list",attrs:{dense:"",nav:"",color:"primary"}},[n("h2",[e._v("Главная")]),n("v-list-item-group",{model:{value:e.selectedItem,callback:function(t){e.selectedItem=t},expression:"selectedItem"}},[n("v-list-item",{on:{click:function(t){return e.goPage(0)}}},[n("v-list-item-content",[n("v-list-item-title",[e._v("Профиль")])],1)],1),n("v-list-item",{on:{click:function(t){return e.goPage(1)}}},[n("v-list-item-content",[n("v-list-item-title",[e._v("Новости")])],1)],1),n("v-spacer"),e._l(e.items,(function(t,i){return n("v-list-item",{key:i,on:{click:function(t){return e.goPage(i+2)}}},[n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:e._s(t.text)}})],1)],1)})),n("v-spacer"),n("v-list-item",{on:{click:function(t){return e.goPage(2+e.items.length)}}},[n("v-list-item-content",[n("v-list-item-title",[e._v("Настройки")])],1)],1),n("v-list-item",{on:{click:function(t){return e.goPage(2+e.items.length+1)}}},[n("v-list-item-content",[n("v-list-item-title",[e._v("Выход")])],1)],1)],2)],1)],1)},a=[],o=(i("b0c0"),i("159b"),i("1157")),s=i.n(o),r={name:"Menu",created:function(){var e=this;switch(s()(window).width()<="568"&&this.loadUser(),this.$router.getMatchedComponents()[0].name){case"Home":this.selectedItem=0,this.page="Главная";break;case"News":this.selectedItem=1,this.page="Новости";break;case"Settings":this.selectedItem=this.items.length+1,this.page="Настройки";break;default:var t=-1;this.items.forEach((function(i){t++,i.name===e.$router.getMatchedComponents()[0].name&&(e.page=i.text,e.selectedItem=t+2)})),console.log(this.selectedItem),console.log(this.page)}},data:function(){return{user:{},selectedItem:0,items:[{text:"Объекты",name:"Objects"},{text:"Работники",name:"Workers"}],page:""}},methods:{goPage:function(e){switch(s()(".menu").hasClass("open")&&s()(".menu").removeClass("open"),e){case 0:this.$router.push({name:"Home"}),this.selectedItem=0;break;case 1:this.$router.push({name:"News"});break;case this.items.length+2:break;case this.items.length+3:this.logout();break;default:this.$router.push({name:this.items[e-2].name});break}},logout:function(){var e=this;s.a.ajax({url:this.$hostname+"auth/token/logout/",type:"POST",success:function(){localStorage.clear(),sessionStorage.clear(),window.location="/"},error:function(t){e.alertError=!0,e.alertMsg="Непредвиденная ошибка",console.log(t.data)}})},showMobileMenu:function(){console.log("open menu"),s()(".menu").hasClass("open")?s()(".menu").removeClass("open"):s()(".menu").addClass("open")},loadUser:function(){var e=this;localStorage.getItem("auth_token")?s.a.ajaxSetup({headers:{Authorization:"Token "+localStorage.getItem("auth_token")}}):sessionStorage.getItem("auth_token")&&s.a.ajaxSetup({headers:{Authorization:"Token "+sessionStorage.getItem("auth_token")}}),s.a.ajax({url:this.$hostname+"time-tracking/user",type:"GET",success:function(t){e.user=t.data.data,console.log(e.user.photo_path)},error:function(e){500===e.status?console.log("Ошибка соединения с сервером"):console.log("Непредвиденная ошибка")}})}}},l=r,c=i("2877"),d=i("6544"),u=i.n(d),f=i("adda"),_=i("8860"),p=i("da13"),v=i("5d23"),h=i("1baa"),m=i("2fa4"),b=Object(c["a"])(l,n,a,!1,null,"15703994",null);t["a"]=b.exports;u()(b,{VImg:f["a"],VList:_["a"],VListItem:p["a"],VListItemContent:v["a"],VListItemGroup:h["a"],VListItemTitle:v["c"],VSpacer:m["a"]})}});
//# sourceMappingURL=app.js.map